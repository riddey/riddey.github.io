(()=>{function Ls(){const e=document.querySelector(".hamburger"),t=document.querySelector(".nav-menu"),o=()=>{window.innerWidth>=1024&&n()&&s()},n=()=>t.classList.contains("open"),i=()=>{e.classList.add("close"),t.classList.add("open")},s=()=>{e.classList.remove("close"),t.classList.remove("open")};e.onclick=()=>n()?s():i(),window.addEventListener("resize",o)}function Bs(){const e=document.querySelectorAll(".has-sub");document.body.addEventListener("click",()=>{e.forEach(e=>{e.classList.add("closed")})}),e.forEach(e=>{let t=-1;e.addEventListener("click",t=>{e.classList.contains("closed")?e.classList.remove("closed"):e.classList.add("closed"),t.stopPropagation()}),e.addEventListener("pointerenter",()=>{window.clearTimeout(t)}),e.addEventListener("pointerleave",()=>{t=window.setTimeout(()=>e.classList.add("closed"),1e3)})})}var e,t,s,i,c,l,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,A,S,M,F,T,z,D,N,L,R,P,H,I,B,$,W,q,Y,G,X,Z,J,gs="https://app.riddey.com",kn,zt,Vt,$t,fn,Oe,St,At,Ot,wt,yt,Te,pe,pt,ut,ct,Ve,ns,ps,_e,Ss,Nt,ve,jt,ze,vt,gt,ht,fe,me,Ie,$e,re,Ue,Ke,qe,rs,je,ne,Je,et,Xt,nt,es,Gn,it,$n,Vn,Bn,In,Pn,Nn,Ne,Mn,ie,Sn,An,Ct,En,kt,ce,Cn,Ft,Tt,xn,Dt,On,_n,yn,jn,Ht,bn,vn,gn,hn,un,qt,ln,cn,ts,Qt,Zt,Jt,en,tn,Ut,mn,ke,Ae,Pt,Rt,Lt,wn,Se,Mt,Fe,se,Tn,zn,ft,mt,ee,Le,Hn,dt,te,le,Ye,Wn,Un,Kn,qn,Yn,He,Xn,Qn,st,Be,Xe,ss,os,ae,Qe,cs,ls,ds,us,hs,de,tt,vs,bs,js,ys,_s,ws,Os,Et,Me,ge,he,It,Bt,Ee,Ts,Ce,Ds,zs,As,ks,xe,Zn,Rn,Ln,Dn,we,on,sn,Kt,Ms="fbfca102-f0ab-45ae-ae6b-f1446d37d967",qs="phc_22BLo2B6ODfFGHKT31qGkG6s9FLRXtoJB6lZcXz8hpM",Ps="https://app.posthog.com";function Es(e,t){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)),s}function o(e){for(var t,s=1;s<arguments.length;s++)t=null!=arguments[s]?arguments[s]:{},s%2?Es(Object(t),!0).forEach(function(s){n(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Es(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fs(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t,n){return t&&fs(e.prototype,t),n&&fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function is(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lt(e,t)}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function lt(e,t){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lt(e,t)}function Xs(e,t){if(e==null)return{};var n,s,o,i=function(e,t){if(e==null)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qs(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,o,s=Re(e);return t?(o=Re(this).constructor,n=Reflect.construct(s,arguments,o)):n=s.apply(this,arguments),Qs(this,n)}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(n=e==null?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"],n==null)return;var n,i,a,s=[],o=!0,r=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(r)throw a}}return s}(e,t)||Ge(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bt(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ge(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function xt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function U(e,t){if(n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=Ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var n,s,o,r,i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return s=!0,o=!1,{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}R={DEBUG:!1,LIB_VERSION:"1.98.2"},kn=Array.isArray,zt=Object.prototype,Vt=zt.hasOwnProperty,Y=zt.toString,f=kn||function(e){return"[object Array]"===Y.call(e)},$t=function(e){return"[object Uint8Array]"===Y.call(e)},x=function(e){return"function"==typeof e},z=function(e){return e===Object(e)&&!f(e)},fn=function(e){if(z(e)){for(var t in e)if(Vt.call(e,t))return!1;return!0}return!1},i=function(e){return void 0===e},_=function(e){return"[object String]"==Y.call(e)},O=function(e){return null===e},S=function(e){return"[object Number]"==Y.call(e)},Oe=function(e){return"[object Boolean]"===Y.call(e)},St=Array.prototype,At=St.forEach,Ot=St.indexOf,e="undefined"!=typeof window?window:void 0,wt=e?.navigator,s=e?.document,l=wt?.userAgent,v=e??{},yt="[PostHog.js]",t={_log:function(t){if(e&&(R.DEBUG||v.POSTHOG_DEBUG)&&!i(e.console)&&e.console){for(var a=("__rrweb_original__"in e.console[t])?e.console[t].__rrweb_original__:e.console[t],s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];a.apply(void 0,[yt].concat(o))}},info:function(){for(var n=arguments.length,s=new Array(n),e=0;e<n;e++)s[e]=arguments[e];t._log.apply(t,["log"].concat(s))},warn:function(){for(var n=arguments.length,s=new Array(n),e=0;e<n;e++)s[e]=arguments[e];t._log.apply(t,["warn"].concat(s))},error:function(){for(var n=arguments.length,s=new Array(n),e=0;e<n;e++)s[e]=arguments[e];t._log.apply(t,["error"].concat(s))},critical:function(){for(var t,n=arguments.length,s=new Array(n),e=0;e<n;e++)s[e]=arguments[e];(t=console).error.apply(t,[yt].concat(s))},uninitializedWarning:function(e){t.error("You must initialize PostHog before calling ".concat(e))}},Te={},pe=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Q(e,t,n){if(f(e))if(At&&e.forEach===At)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var s=0,o=e.length;s<o;s++)if(s in e&&t.call(n,e[s],s)===Te)return}function r(e,t,n){if(!O(e)&&!i(e)){if(f(e))return Q(e,t,n);for(var s in e)if(Vt.call(e,s)&&t.call(n,e[s],s)===Te)return}}p=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),t=1;t<n;t++)s[t-1]=arguments[t];return Q(s,function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e};function a(e,t){return-1!==e.indexOf(t)}function De(e){for(var n=Object.keys(e),t=n.length,s=new Array(t);t--;)s[t]=[n[t],e[n[t]]];return s}pt=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},ut=function(e){try{return e()}catch{return}},ct=function(e){return function(){try{for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return e.apply(this,o)}catch(e){t.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),t.critical(e)}}},Ve=function(e){var t={};return r(e,function(e,n){_(e)&&e.length>0&&(t[n]=e)}),t},ns=["$performance_raw"];function Is(e,t){return o=e,s=function(e,n){return n&&ns.indexOf(n)>-1?e:_(e)&&!O(t)?e.slice(0,t):e},n=new Set,function e(t,o){return t!==Object(t)?s?s(t,o):t:n.has(t)?void 0:(n.add(t),f(t)?(i=[],Q(t,function(t){i.push(e(t))})):(i={},r(t,function(t,s){n.has(t)||(i[s]=e(t,s))})),i);var i}(o);var n,s,o}function Ze(e){var n,i,a,r,c,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,d=0,t="",l=[];if(!e)return e;e=ps(e);do i=(n=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,a=n>>12&63,r=n>>6&63,c=63&n,l[d++]=s.charAt(i)+s.charAt(a)+s.charAt(r)+s.charAt(c);while(o<e.length)switch(t=l.join(""),e.length%3){case 1:t=t.slice(0,-2)+"==";break;case 2:t=t.slice(0,-1)+"="}return t}ps=function(e){i="";for(n=s=0,r=(e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,o=0;o<r;o++){var n,s,o,i,r,t=e.charCodeAt(o),a=null;t<128?s++:a=t>127&&t<2048?String.fromCharCode(t>>6|192,63&t|128):String.fromCharCode(t>>12|224,t>>6&63|128,63&t|128),O(a)||(s>n&&(i+=e.substring(n,s)),i+=a,n=s=o+1)}return s>n&&(i+=e.substring(n,e.length)),i},J=function(){function n(e){return e&&(e.preventDefault=n.preventDefault,e.stopPropagation=n.stopPropagation),e}return n.preventDefault=function(){this.returnValue=!1},n.stopPropagation=function(){this.cancelBubble=!0},function(s,o,i,a,r){if(s)if(s.addEventListener&&!a)s.addEventListener(o,i,!!r);else{var c="on"+o,l=s[c];s[c]=function(t,s,o){return function(i){if(i=i||n(e?.event)){var a,c,r=!0;return x(o)&&(a=o(i)),c=s.call(t,i),!1!==a&&!1!==c||(r=!1),r}}}(s,i,l)}else t.error("No valid element provided to register_event")}}();function ue(e,t){var n=function(){if(!s)return t("document not found");var o,i,n=s.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(e){return t(void 0,e)},n.onerror=function(e){return t(e)},o=s.querySelectorAll("body > script"),o.length>0?null===(i=o[0].parentNode)||void 0===i||i.insertBefore(n,o[0]):s.body.appendChild(n)};s!=null&&s.body?n():s==null||s.addEventListener("DOMContentLoaded",n)}function ot(e){return e?pe(e).split(/\s+/):[]}function Pe(e){var t="";switch(rt(e.className)){case"string":t=e.className;break;case"object":t=("baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return ot(t)}function be(e){var t="";return ye(e)&&!nn(e)&&e.childNodes&&e.childNodes.length&&r(e.childNodes,function(e){Cs(e)&&e.textContent&&(t+=pe(e.textContent).split(/(\s+)/).filter(K).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),pe(t)}function xs(e){return!!e&&1===e.nodeType}function V(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function Cs(e){return!!e&&3===e.nodeType}function rn(e){return!!e&&11===e.nodeType}_e=["a","button","form","input","select","textarea","label"];function ye(e){for(var n,s,o,t=e;t.parentNode&&!V(t,"body");t=t.parentNode)if(n=Pe(t),a(n,"ph-sensitive")||a(n,"ph-no-capture"))return!1;if(a(Pe(e),"ph-include"))return!0;if(s=e.type||"",_(s))switch(s.toLowerCase()){case"hidden":case"password":return!1}return o=e.name||e.id||"",!_(o)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(o.replace(/[^a-zA-Z0-9]/g,""))}function nn(e){return!!(V(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||V(e,"select")||V(e,"textarea")||"true"===e.getAttribute("contenteditable"))}function K(e){if(O(e)||i(e))return!1;if(_(e)){if(e=pe(e),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(e))return!1}return!0}function Jn(e){var t=be(e);return K(t="".concat(t," ").concat(ms(e)).trim())?t:""}function ms(e){var n="";return e&&e.childNodes&&e.childNodes.length&&r(e.childNodes,function(e){if(e&&"span"===(null===(s=e.tagName)||void 0===s?void 0:s.toLowerCase()))try{var s,o=be(e);n="".concat(n," ").concat(o).trim(),e.childNodes&&e.childNodes.length&&(n="".concat(n," ").concat(ms(e)).trim())}catch(e){t.error(e)}}),n}function Rs(e){return function(e){var t=e.map(function(e){if(t="",e.tag_name&&(t+=e.tag_name),e.attr_class){e.attr_class.sort(),n=U(e.attr_class);try{for(n.s();!(a=n.n()).done;)r=a.value,t+=".".concat(r.replace(/"/g,""))}catch(e){n.e(e)}finally{n.f()}}var t,n,s,i,a,r,c=o(o(o(o({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(s=e.nth_child)&&void 0!==s?s:0,"nth-of-type":null!==(i=e.nth_of_type)&&void 0!==i?i:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),l={};return De(c).sort(function(e,t){var n=k(e,1)[0],s=k(t,1)[0];return n.localeCompare(s)}).forEach(function(e){var t=k(e,2),n=t[0],s=t[1];return l[Fs(n.toString())]=Fs(s.toString())}),t+=":",t+=De(c).map(function(e){var t=k(e,2),n=t[0],s=t[1];return"".concat(n,'="').concat(s,'"')}).join("")});return t.join(";")}(function(e){return e.map(function(e){var t,n,s={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:Ys(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return De(e).filter(function(e){return 0===k(e,1)[0].indexOf("attr__")}).forEach(function(e){var t=k(e,2),n=t[0],o=t[1];return s.attributes[n]=o}),s})}(e))}function Fs(e){return e.replace(/"|\\"/g,'\\"')}function Ys(e){var t=e.attr__class;return t?f(t)?t:ot(t):void 0}Ss=function(){function e(t){d(this,e),this.clicks=[],this.enabled=t}return u(e,[{key:"isRageClick",value:function(e,t,n){if(!this.enabled)return!1;var s=this.clicks[this.clicks.length-1];if(s&&Math.abs(e-s.x)+Math.abs(t-s.y)<30&&n-s.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}]),e}(),Nt="$people_distinct_id",ve="__alias",X="__timers",jt="$autocapture_disabled_server_side",ze="$session_recording_enabled_server_side",vt="$console_log_recording_enabled_server_side",gt="$session_recording_recorder_version_server_side",ht="$session_recording_network_payload_capture",fe="$sesid",me="$session_is_sampled",B="$enabled_feature_flags",Ie="$early_access_features",W="$stored_person_properties",T="$stored_group_properties",$e="$surveys",re="$flag_call_reported",Ue="$user_state",Ke="$posthog_quota_limited",qe="$client_session_props",rs=[Nt,ve,"__cmpns",X,ze,fe,B,Ue,Ke,Ie,T,W,$e,re,qe];function _t(e,t){return t.length>e?t.slice(0,e)+"...":t}F={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(e){var t,n=O(this._isDisabledServerSide)?!(null===(t=e.persistence)||void 0===t||!t.props[jt]):this._isDisabledServerSide,s=!!e.config.autocapture;this._isAutocaptureEnabled=s&&!n},_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!xs(t))return t},_getAugmentPropertiesFromElement:function(e){if(!ye(e))return{};var t={};return r(e.attributes,function(e){if(0===e.name.indexOf("data-ph-capture-attribute")){var s=e.name.replace("data-ph-capture-attribute-",""),n=e.value;s&&n&&K(n)&&(t[s]=n)}}),t},_getPropertiesFromElement:function(e,t,n){o=e.tagName.toLowerCase(),s={tag_name:o},_e.indexOf(o)>-1&&!n&&("a"===o.toLowerCase()||"button"===o.toLowerCase()?s.$el_text=_t(1024,Jn(e)):s.$el_text=_t(1024,be(e))),a=Pe(e),a.length>0&&(s.classes=a.filter(function(e){return""!==e})),c=null===(i=this.config)||void 0===i?void 0:i.element_attribute_ignorelist,r(e.attributes,function(n){if((!nn(e)||-1!==["name","id","class"].indexOf(n.name))&&(c==null||!c.includes(n.name))&&!t&&K(n.value)&&(o=n.name,!_(o)||"_ngcontent"!==o.substring(0,10)&&"_nghost"!==o.substring(0,7))){var o,i=n.value;"class"===n.name&&(i=ot(i).join(" ")),s["attr__"+n.name]=_t(1024,i)}});for(var s,o,i,a,c,d=1,u=1,l=e;l=this._previousElementSibling(l);)d++,l.tagName===e.tagName&&u++;return s.nth_child=d,s.nth_of_type=u,s},_getDefaultProperties:function(e){return{$event_type:e,$ce_version:1}},_extractCustomPropertyValue:function(e){var t=[];return r(s?.querySelectorAll(e.css_selector),function(e){var n;["input","select"].indexOf(e.tagName.toLowerCase())>-1?n=e.value:e.textContent&&(n=e.textContent),K(n)&&t.push(n)}),t.join(", ")},_getCustomProperties:function(e){var n=this,t={};return r(this._customProperties,function(o){r(o.event_selectors,function(i){r(s?.querySelectorAll(i),function(s){a(e,s)&&ye(s)&&(t[o.name]=n._extractCustomPropertyValue(o))})})}),t},_getEventTarget:function(e){return i(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t},_captureEvent:function(t,n){var o,l,d,u,h,b,f=this,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$autocapture",s=this._getEventTarget(t);if((Cs(s)&&(s=s.parentNode||null),"$autocapture"===m&&"click"===t.type&&t instanceof MouseEvent)&&null!==(h=this.rageclicks)&&void 0!==h&&h.isRageClick(t.clientX,t.clientY,(new Date).getTime())&&this._captureEvent(t,n,"$rageclick"),s&&function(t,n){if(s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,!e||!t||V(t,"html")||!xs(t))return!1;if(s!=null&&s.url_allowlist&&(p=e.location.href,d=s.url_allowlist,d&&!d.some(function(e){return p.match(e)})))return!1;if(s!=null&&s.dom_event_allowlist&&(a=s.dom_event_allowlist,a&&!a.some(function(e){return n.type===e})))return!1;if(s!=null&&s.element_allowlist&&(r=s.element_allowlist,r&&!r.some(function(e){return t.tagName.toLowerCase()===e})))return!1;if(s!=null&&s.css_selector_allowlist&&(c=s.css_selector_allowlist,c&&!c.some(function(e){return t.matches(e)})))return!1;for(var s,a,r,c,d,u,h,m,p,l=!1,f=[t],i=!0,o=t;o.parentNode&&!V(o,"body");)if(rn(o.parentNode))f.push(o.parentNode.host),o=o.parentNode.host;else{if(!(i=o.parentNode||!1))break;_e.indexOf(i.tagName.toLowerCase())>-1?l=!0:(u=e.getComputedStyle(i),u&&"pointer"===u.getPropertyValue("cursor")&&(l=!0)),f.push(i),o=i}if(h=e.getComputedStyle(t),h&&"pointer"===h.getPropertyValue("cursor")&&"click"===n.type)return!0;switch(m=t.tagName.toLowerCase(),m){case"html":return!1;case"form":return"submit"===n.type;case"input":case"select":case"textarea":return"change"===n.type||"click"===n.type;default:return l?"click"===n.type:"click"===n.type&&(_e.indexOf(m)>-1||"true"===t.getAttribute("contenteditable"))}}(s,t,this.config)){for(l=[s],o=s;o.parentNode&&!V(o,"body");)rn(o.parentNode)?(l.push(o.parentNode.host),o=o.parentNode.host):(l.push(o.parentNode),o=o.parentNode);var c,i=[],g={},v=!1;return r(l,function(e){var t,s=ye(e);"a"===e.tagName.toLowerCase()&&(c=e.getAttribute("href"),c=s&&K(c)&&c),a(Pe(e),"ph-no-capture")&&(v=!0),i.push(f._getPropertiesFromElement(e,n.config.mask_all_element_attributes,n.config.mask_all_text)),t=f._getAugmentPropertiesFromElement(e),p(g,t)}),n.config.mask_all_text||("a"===s.tagName.toLowerCase()||"button"===s.tagName.toLowerCase()?i[0].$el_text=Jn(s):i[0].$el_text=be(s)),c&&(i[0].attr__href=c),!v&&(b=p(this._getDefaultProperties(t.type),n.elementsChainAsString?{$elements_chain:Rs(i)}:{$elements:i},null!==(d=i[0])&&void 0!==d&&d.$el_text?{$el_text:null===(u=i[0])||void 0===u?void 0:u.$el_text}:{},this._getCustomProperties(l),g),n.capture(m,b),!0)}},_navigate:function(t){e&&(e.location.href=t)},_addDomEventHandlers:function(t){var n,o=this;e&&s&&(n=function(n){n=n||e?.event,o._captureEvent(n,t)},J(s,"submit",n,!1,!0),J(s,"change",n,!1,!0),J(s,"click",n,!1,!0))},_customProperties:[],rageclicks:null,config:void 0,init:function(e){var t;Oe(e.__autocapture)||(this.config=e.__autocapture),null!==(t=this.config)&&void 0!==t&&t.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(e){return new RegExp(e)})),this.rageclicks=new Ss(e.config.rageclick)},afterDecideResponse:function(e,s){var o=s.config.token;this._initializedTokens.indexOf(o)>-1?t.info('autocapture already initialized for token "'+o+'"'):(s.persistence&&s.persistence.register(n({},jt,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this._setIsAutocaptureEnabled(s),this._initializedTokens.push(o),e&&e.config&&e.config.enable_collect_everything&&this._isAutocaptureEnabled?(e.custom_properties&&(this._customProperties=e.custom_properties),this._addDomEventHandlers(s)):s.__autocapture=!1)},enabledForProject:function(e,t,n){if(!e)return!0;t=i(t)?10:t,n=i(n)?10:n;for(var o=0,s=0;s<e.length;s++)o+=e.charCodeAt(s);return o%t<n},isBrowserSupported:function(){return x(s?.querySelectorAll)}},!function(e){for(var t in e)x(e[t])&&(e[t]=e[t].bind(e))}(F),function(e){for(var t in e)x(e[t])&&(e[t]=ct(e[t]))}(F),je="$active_feature_flags",ne="$override_feature_flags",Je="$feature_flag_payloads",et=function(e){n={},t=U(De(e||{}));try{for(t.s();!(s=t.n()).done;){var t,n,s,o=k(s.value,2),a=o[0],i=o[1];i&&(n[a]=i)}}catch(e){t.e(e)}finally{t.f()}return n},Xt=function(){function e(t){d(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return u(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){if(o=this.instance.get_property(B),e=this.instance.get_property(ne),!e)return o||{};for(var e,o,i=p({},o),s=Object.keys(e),n=0;n<s.length;n++)!1===e[s[n]]?delete i[s[n]]:i[s[n]]=e[s[n]];return this._override_warning||(t.warn(" Overriding feature flags!",{enabledFlags:o,overriddenFlags:e,finalFlags:i}),this._override_warning=!0),i}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(Je)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){if(e=this,!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e,t=this.instance.config.token,n=this.instance.get_property(W),s=this.instance.get_property(T),o=Ze(JSON.stringify({token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:s,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:o},{method:"POST"},this.instance._prepare_callback(function(t){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(t),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(e){if(o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var o,i,a=this.getFlagVariants()[e],r="".concat(a),s=this.instance.get_property(re)||{};return(o.send_event||!("send_event"in o))&&(!(e in s)||!s[e].includes(r))&&(f(s[e])?s[e].push(r):s[e]=[r],null===(i=this.instance.persistence)||void 0===i||i.register(n({},re,s)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:a})),a}t.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);t.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(t){return t!==e})}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var t=this.getFlagVariants(),s=this.getFlagPayloads();!function(e,t){var i,a,r,c,l,d,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=e.featureFlags,m=e.featureFlagPayloads;if(s)if(f(s)){if(d={},s)for(a=0;a<s.length;a++)d[s[a]]=!0;t&&t.register((n(l={},je,s),n(l,B,d),l))}else i=s,c=m,e.errorsWhileComputingFlags&&(i=o(o({},u),i),c=o(o({},h),c)),t&&t.register((n(r={},je,Object.keys(et(i))),n(r,B,i||{}),n(r,Je,c||{}),r))}(e,this.instance.persistence,t,s),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return t.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===e)this.instance.persistence.unregister(ne);else if(f(e)){for(var o={},s=0;s<e.length;s++)o[e[s]]=!0;this.instance.persistence.register(n({},ne,o))}else this.instance.persistence.register(n({},ne,e))}},{key:"onFeatureFlags",value:function(e){if(t=this,this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var t,n=this._prepareFeatureFlagsForCallbacks(),s=n.flags,o=n.flagVariants;e(s,o)}return function(){return t.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){var s,i,a,r=n({},"$feature_enrollment/".concat(e),t);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:r}),this.setPersonPropertiesForFlags(r,!1),a=o(o({},this.getFlagVariants()),{},n({},e,t)),null===(s=this.instance.persistence)||void 0===s||s.register((n(i={},je,Object.keys(et(a))),n(i,B,a),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var s=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.instance.get_property(Ie);if(t&&!o)return e(t);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(t){var o,i=t.earlyAccessFeatures;return null===(o=s.instance.persistence)||void 0===o||o.register(n({},Ie,i)),e(i)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var t=this.getFlags(),e=this.getFlagVariants();return{flags:t.filter(function(t){return e[t]}),flagVariants:Object.keys(e).filter(function(t){return e[t]}).reduce(function(t,n){return t[n]=e[n],t},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),t=e.flags,n=e.flagVariants;this.featureFlagEventHandlers.forEach(function(e){return e(t,n)})}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=this.instance.get_property(W)||{};this.instance.register(n({},W,o(o({},s),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(W)}},{key:"setGroupPropertiesForFlags",value:function(e){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this.instance.get_property(T)||{};0!==Object.keys(t).length&&Object.keys(t).forEach(function(n){t[n]=o(o({},t[n]),e[n]),delete e[n]}),this.instance.register(n({},T,o(o({},t),e))),s&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var t=this.instance.get_property(T)||{};this.instance.register(n({},T,o(o({},t),{},n({},e,{}))))}else this.instance.unregister(T)}}]),e}(),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return S(e)&&isFinite(e)&&Math.floor(e)===e}),nt="0123456789abcdef",es=function(){function e(t){if(d(this,e),this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}return u(e,[{key:"toString",value:function(){for(var t="",e=0;e<this.bytes.length;e++)t=t+nt.charAt(this.bytes[e]>>>4)+nt.charAt(15&this.bytes[e]),3!==e&&5!==e&&7!==e&&9!==e||(t+="-");if(36!==t.length)throw new Error("Invalid UUIDv7 was generated");return t}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(e){return 0===this.compareTo(e)}},{key:"compareTo",value:function(e){for(var n,t=0;t<16;t++)if(n=this.bytes[t]-e.bytes[t],0!==n)return Math.sign(n);return 0}}],[{key:"fromFieldsV7",value:function(t,n,s,o){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(s)||!Number.isInteger(o)||t<0||n<0||s<0||o<0||t>281474976710655||n>4095||s>1073741823||o>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=t/Math.pow(2,40),i[1]=t/Math.pow(2,32),i[2]=t/Math.pow(2,24),i[3]=t/Math.pow(2,16),i[4]=t/Math.pow(2,8),i[5]=t,i[6]=112|n>>>8,i[7]=n,i[8]=128|s>>>24,i[9]=s>>>16,i[10]=s>>>8,i[11]=s,i[12]=o>>>24,i[13]=o>>>16,i[14]=o>>>8,i[15]=o,new e(i)}}]),e}(),Gn=function(){function e(){d(this,e),n(this,"timestamp",0),n(this,"counter",0),n(this,"random",new Vn)}return u(e,[{key:"generate",value:function(){var e,t=this.generateOrAbort();if(i(t)){if(this.timestamp=0,e=this.generateOrAbort(),i(e))throw new Error("Could not generate UUID after timestamp reset");return e}return t}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return es.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),it=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e},e&&!i(e.crypto)&&crypto.getRandomValues&&(it=function(e){return crypto.getRandomValues(e)}),Vn=function(){function e(){d(this,e),n(this,"buffer",new Uint32Array(8)),n(this,"cursor",1/0)}return u(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(it(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),P=function(){return Bn().toString()},Bn=function(){return($n||($n=new Gn)).generate()},In="Thu, 01 Jan 1970 00:00:00 GMT",q="",Pn=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,Nn=function(e){var t=e.match(Pn);return t?t[0]:""};function Zs(e,n){if(n){var i,o=function(e){if(t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,q)return q;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var t,n,o,i=e.split("."),a=Math.min(i.length,8),r="dmn_chk_"+P(),c=new RegExp("(^|;)\\s*"+r+"=1");!q&&a--;)n=i.slice(a).join("."),o=r+"=1;domain=."+n,t.cookie=o,c.test(t.cookie)&&(t.cookie=o+";expires="+In,q=n);return q}(e);return o||(i=Nn(e),i!==o&&t.info("Warning: cookie subdomain discovery mismatch",i,o),o=i),o?"; domain=."+o:""}return""}E={is_supported:function(){return!!s},error:function(e){t.error("cookieStore error: "+e)},get:function(e){if(s){try{for(var t,o=e+"=",i=s.cookie.split(";").filter(function(e){return e.length}),n=0;n<i.length;n++){for(t=i[n];" "==t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return decodeURIComponent(t.substring(o.length,t.length))}}catch{}return null}},parse:function(e){var t;try{t=JSON.parse(E.get(e))||{}}catch{}return t},set:function(e,n,o,i,a){if(s)try{var r,c,l="",d="",u=Zs(s.location.hostname,i);return o&&(c=new Date,c.setTime(c.getTime()+24*o*60*60*1e3),l="; expires="+c.toUTCString()),a&&(d="; secure"),r=e+"="+encodeURIComponent(JSON.stringify(n))+l+"; SameSite=Lax; path=/"+u+d,r.length>3686.4&&t.warn("cookieStore warning: large cookie, len="+r.length),s.cookie=r,r}catch{return}},remove:function(e,t){try{E.set(e,"",-1,t)}catch{return}}},Ne=null,h={is_supported:function(){if(!O(Ne))return Ne;var s,n=!0;if(i(e))n=!1;else try{s="__mplssupport__",h.set(s,"xyz"),'"xyz"'!==h.get(s)&&(n=!1),h.remove(s)}catch{n=!1}return n||t.error("localStorage unsupported; falling back to cookie store"),Ne=n,n},error:function(e){t.error("localStorage error: "+e)},get:function(t){try{return e?.localStorage.getItem(t)}catch(e){h.error(e)}return null},parse:function(e){try{return JSON.parse(h.get(e))||{}}catch{}return null},set:function(t,n){try{e==null||e.localStorage.setItem(t,JSON.stringify(n))}catch(e){h.error(e)}},remove:function(t){try{e==null||e.localStorage.removeItem(t)}catch(e){h.error(e)}}},Mn=["distinct_id",fe,me],G=o(o({},h),{},{parse:function(e){try{var t,n={};try{n=E.parse(e)||{}}catch{}return t=p(n,JSON.parse(h.get(e)||"{}")),h.set(e,t),t}catch{}return null},set:function(e,t,n,s,o){try{h.set(e,t);var i={};Mn.forEach(function(e){t[e]&&(i[e]=t[e])}),Object.keys(i).length&&E.set(e,i,n,s,o)}catch(e){h.error(e)}},remove:function(t,n){try{e==null||e.localStorage.removeItem(t),E.remove(t,n)}catch(e){h.error(e)}}}),ie={},Sn={is_supported:function(){return!0},error:function(e){t.error("memoryStorage error: "+e)},get:function(e){return ie[e]||null},parse:function(e){return ie[e]||null},set:function(e,t){ie[e]=t},remove:function(e){delete ie[e]}},L=null,g={is_supported:function(){if(!O(L))return L;if(L=!0,i(e))L=!1;else try{var t="__support__";g.set(t,"xyz"),'"xyz"'!==g.get(t)&&(L=!1),g.remove(t)}catch{L=!1}return L},error:function(e){t.error("sessionStorage error: ",e)},get:function(t){try{return e?.sessionStorage.getItem(t)}catch(e){g.error(e)}return null},parse:function(e){try{return JSON.parse(g.get(e))||null}catch{}return null},set:function(t,n){try{e==null||e.sessionStorage.setItem(t,JSON.stringify(n))}catch(e){g.error(e)}},remove:function(t){try{e==null||e.sessionStorage.removeItem(t)}catch(e){g.error(e)}}},An=["localhost","127.0.0.1"],Ct=function(e){var t=s?.createElement("a");return i(t)?null:(t.href=e,t)},En=function(e,t){return!!function(e){try{new RegExp(e)}catch{return!1}return!0}(t)&&new RegExp(t).test(e)},kt=function(e,n){for(var s,o,a,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++)if(a=r[i].split("="),a[0]===n){o=a;break}if(!f(o)||o.length<2)return"";s=o[1];try{s=decodeURIComponent(s)}catch{t.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},ce=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},m={campaignParams:function(e){var n=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(e||[]),t={};return r(n,function(e){var n=s?kt(s.URL,e):"";n.length&&(t[e]=n)}),t},searchEngine:function(){var e=s?.referrer;return e?0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var n,e=m.searchEngine(),o="yahoo"!=e?"q":"p",t={};return O(e)||(t.$search_engine=e,n=s?kt(s.referrer,o):"",n.length&&(t.ph_keyword=n)),t},browser:function(e,t,n){return t=t||"",n||a(e," OPR/")?a(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":a(e,"IEMobile")||a(e,"WPDesktop")?"Internet Explorer Mobile":a(e,"SamsungBrowser/")?"Samsung Internet":a(e,"Edge")||a(e,"Edg/")?"Microsoft Edge":a(e,"FBIOS")?"Facebook Mobile":a(e,"Chrome")?"Chrome":a(e,"CriOS")?"Chrome iOS":a(e,"UCWEB")||a(e,"UCBrowser")?"UC Browser":a(e,"FxiOS")?"Firefox iOS":a(t,"Apple")||function(e){return a(e,"Safari")&&!a(e,"Chrome")&&!a(e,"Android")}(e)?a(e,"Mobile")?"Mobile Safari":"Safari":a(e,"Android")?"Android Mobile":a(e,"Konqueror")||a(e,"konqueror")?"Konqueror":a(e,"Firefox")?"Firefox":a(e,"MSIE")||a(e,"Trident/")?"Internet Explorer":a(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,n){if(s={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[m.browser(e,t,n)],i(s))return null;for(o=0;o<s.length;o++){var s,o,r=s[o],a=e.match(r);if(a)return parseFloat(a[a.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){if(/Windows/i.test(e)){if(/Phone/.test(e)||/WPDesktop/.test(e))return{os_name:"Windows Phone",os_version:""};var t,n,s,o=/Windows NT ([0-9.]+)/i.exec(e);return o&&o[1]?{os_name:"Windows",os_version:o[1]}:{os_name:"Windows",os_version:""}}return/(iPhone|iPad|iPod)/.test(e)?(t=/OS (\d+)_(\d+)_?(\d+)?/i.exec(e),t&&t[1]?{os_name:"iOS",os_version:[t[1],t[2],t[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}):/Android/.test(e)?(n=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(e),n&&n[1]?{os_name:"Android",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"Android",os_version:""}):/(BlackBerry|PlayBook|BB10)/i.test(e)?{os_name:"BlackBerry",os_version:""}:/Mac/i.test(e)?(s=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(e),s&&s[1]?{os_name:"Mac OS X",os_version:[s[1],s[2],s[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}):/Linux/.test(e)?{os_name:"Linux",os_version:""}:/CrOS/.test(e)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)&&!/Mobile/.test(e)?"Android Tablet":/Android/.test(e)?"Android":""},deviceType:function(e){var t=this.device(e);return"iPad"===t||"Android Tablet"===t?"Tablet":t?"Mobile":"Desktop"},referrer:function(){return s?.referrer||"$direct"},referringDomain:function(){var e;return s!=null&&s.referrer&&(null===(e=Ct(s.referrer))||void 0===e?void 0:e.host)||"$direct"},properties:function(){if(!l)return{};var t=m.os(l),n=t.os_name,s=t.os_version;return p(Ve({$os:n,$os_version:s,$browser:m.browser(l,navigator.vendor,v.opera),$device:m.device(l),$device_type:m.deviceType(l)}),{$current_url:e?.location.href,$host:e?.location.host,$pathname:e?.location.pathname,$raw_user_agent:l.length>1e3?l.substring(0,997)+"...":l,$browser_version:m.browserVersion(l,navigator.vendor,v.opera),$browser_language:m.browserLanguage(),$screen_height:e?.screen.height,$screen_width:e?.screen.width,$viewport_height:e?.innerHeight,$viewport_width:e?.innerWidth,$lib:"web",$lib_version:R.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:pt()/1e3})},people_properties:function(){if(!l)return{};var e=m.os(l),t=e.os_name,n=e.os_version;return p(Ve({$os:t,$os_version:n,$browser:m.browser(l,navigator.vendor,v.opera)}),{$browser_version:m.browserVersion(l,navigator.vendor,v.opera)})}},Cn=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],Ft=function(){function e(n){d(this,e);var s,o="";n.token&&(o=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=n.custom_campaign_params||[],n.persistence_name?this.name="ph_"+n.persistence_name:this.name="ph_"+o+"_posthog",-1===Cn.indexOf(n.persistence.toLowerCase())&&(t.critical("Unknown persistence type "+n.persistence+"; falling back to localStorage+cookie"),n.persistence="localStorage+cookie"),s=n.persistence.toLowerCase(),"localstorage"===s&&h.is_supported()?this.storage=h:"localstorage+cookie"===s&&G.is_supported()?this.storage=G:"sessionstorage"===s&&g.is_supported()?this.storage=g:"memory"===s?this.storage=Sn:"cookie"===s?this.storage=E:G.is_supported()?this.storage=G:this.storage=E,this.load(),this.update_config(n),this.save()}return u(e,[{key:"properties",value:function(){var e={};return r(this.props,function(t,n){if(n===B&&z(t))for(var s,i,c,a=Object.keys(t),o=0;o<a.length;o++)e["$feature/".concat(a[o])]=t[a[o]];else c=n,s=!1,(O(i=rs)?s:Ot&&i.indexOf===Ot?-1!=i.indexOf(c):(r(i,function(e){if(s||(s=e===c))return Te}),s))||(e[n]=t)}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=p({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,t,n){var o,s=this;return!!(z(e)&&(i(t)&&(t="None"),this.expire_days=i(n)?this.default_expiry:n,o=!1,r(e,function(e,n){s.props.hasOwnProperty(n)&&s.props[n]!==t||(s.props[n]=e,o=!0)}),o))&&(this.save(),!0)}},{key:"register",value:function(e,t){var n,s=this;return!!(z(e)&&(this.expire_days=i(t)?this.default_expiry:t,n=!1,r(e,function(t,o){e.hasOwnProperty(o)&&s.props[o]!==t&&(s.props[o]=t,n=!0)}),n))&&(this.save(),!0)}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(m.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(m.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||m.referrer(),$referring_domain:this.props.$referring_domain||m.referringDomain()})}},{key:"get_referrer_info",value:function(){return Ve({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return r(this.props,function(t,n){n in e||(e[n]=t)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,t){var n=this.props[X]||{};n[e]=t,this.props[X]=n,this.save()}},{key:"remove_event_timer",value:function(e){var t=(this.props[X]||{})[e];return i(t)||(delete this.props[X][e],this.save()),t}},{key:"get_user_state",value:function(){return this.props[Ue]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[Ue]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[Ke]||{}}},{key:"set_quota_limits",value:function(e){this.props[Ke]=e,this.save()}}]),e}(),Tt=2,xn=4,Dt=3,On=6,_n=0,yn="rrweb/console@1",jn=u(function e(t){var o,i,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,e),n(this,"bucketSize",100),n(this,"refillRate",10),n(this,"mutationBuckets",{}),n(this,"loggedTracker",{}),n(this,"refillBuckets",function(){Object.keys(s.mutationBuckets).forEach(function(e){s.mutationBuckets[e]=s.mutationBuckets[e]+s.refillRate,s.mutationBuckets[e]>=s.bucketSize&&delete s.mutationBuckets[e]})}),n(this,"getNodeOrRelevantParent",function(e){var n,t=s.rrweb.mirror.getNode(e);return"svg"!==t?.nodeName&&t instanceof Element&&(n=t.closest("svg"),n)?[s.rrweb.mirror.getId(n),n]:[e,t]}),n(this,"numberOfChanges",function(e){var t,n,s,o,i,a,r,c;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(s=null===(o=e.attributes)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(i=null===(a=e.texts)||void 0===a?void 0:a.length)&&void 0!==i?i:0)+(null!==(r=null===(c=e.adds)||void 0===c?void 0:c.length)&&void 0!==r?r:0)}),n(this,"throttleMutations",function(e){if(e.type!==Dt||e.data.source!==_n)return e;var n,t=e.data,o=s.numberOfChanges(t);return t.attributes&&(t.attributes=t.attributes.filter(function(e){var n,o,i,a=k(s.getNodeOrRelevantParent(e.id),2),t=a[0],r=a[1];return 0!==s.mutationBuckets[t]&&((s.mutationBuckets[t]=null!==(n=s.mutationBuckets[t])&&void 0!==n?n:s.bucketSize,s.mutationBuckets[t]=Math.max(s.mutationBuckets[t]-1,0),0===s.mutationBuckets[t])&&(s.loggedTracker[t]||(s.loggedTracker[t]=!0,null===(o=(i=s.options).onBlockedNode)||void 0===o||o.call(i,t,r))),e)})),n=s.numberOfChanges(t),0!==n||o===n?e:void 0}),this.rrweb=t,this.options=a,this.refillRate=null!==(o=this.options.refillRate)&&void 0!==o?o:this.refillRate,this.bucketSize=null!==(i=this.options.bucketSize)&&void 0!==i?i:this.bucketSize,setInterval(function(){s.refillBuckets()},1e3)}),Ht=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(Ht||{}),bn={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},vn=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],gn=["/s/","/e/","/i/vo/e/"];function pn(e,t,n,s){var o=t?.["content-length"];return o&&parseInt(o)>n?"".concat(s," body too large to record"):e}hn=function(e,n){var i,a,r,s=e.session_recording,u=!1!==s.recordHeaders&&n.recordHeaders,h=!1!==s.recordBody&&n.recordBody,c=!1!==s.recordPerformance&&n.recordPerformance,m=(r=s,a=Math.min(1e6,null!==(i=r.payloadSizeLimitBytes)&&void 0!==i?i:1e6),function(e){return e!=null&&e.requestBody&&(e.requestBody=pn(e.requestBody,e.requestHeaders,a,"Request")),e!=null&&e.responseBody&&(e.responseBody=pn(e.responseBody,e.responseHeaders,a,"Response")),e}),l=function(e){return m(function(e){var t=Ct(e.name);if(!(t&&t.pathname&&gn.includes(t.pathname)))return e}((t=e,Object.keys(null!==(n=t.requestHeaders)&&void 0!==n?n:{}).forEach(function(e){var n;vn.includes(e.toLowerCase())&&(null===(n=t.requestHeaders)||void 0===n||delete n[e])}),t)));var t,n},d=x(e.session_recording.maskNetworkRequestFn);return d&&x(e.session_recording.maskCapturedNetworkRequestFn)&&t.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return o(o({},t),{},{name:n?.url})}),s.maskRequestFn=x(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,s,o,i=l(t);return i&&null!==(n=null===(s=(o=e.session_recording).maskCapturedNetworkRequestFn)||void 0===s?void 0:s.call(o,i))&&void 0!==n?n:void 0}:void 0,s.maskRequestFn||(s.maskRequestFn=l),o(o(o({},bn),s),{},{recordHeaders:u,recordBody:h,recordPerformance:c,recordInitialRequests:c})},un="/s/",qt=3e5,!function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet"}(M||(M={})),ln=[M.MouseMove,M.MouseInteraction,M.Scroll,M.ViewportResize,M.Input,M.TouchMove,M.MediaInteraction,M.Drag],cn=function(){function s(o){var i=this;if(d(this,s),n(this,"isIdle",!1),n(this,"_linkedFlagSeen",!1),n(this,"_lastActivityTimestamp",Date.now()),n(this,"windowId",null),n(this,"sessionId",null),n(this,"_linkedFlag",null),n(this,"_sampleRate",null),n(this,"_minimumDuration",null),n(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=o,this._captureStarted=!1,this._endpoint=un,this.stopRrweb=void 0,this.receivedDecide=!1,e==null||e.addEventListener("beforeunload",function(){i._flushBuffer()}),!this.instance.sessionManager)throw t.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return u(s,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw t.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return S(this._sampleRate)?this.instance.get_property(me):null}},{key:"sessionDuration",get:function(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],s=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-s:null}},{key:"isRecordingEnabled",get:function(){var t=!!this.instance.get_property(ze),n=!this.instance.config.disable_session_recording;return e&&t&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var t=!!this.instance.get_property(vt),e=this.instance.config.enable_recording_console_log;return e??t}},{key:"recordingVersion",get:function(){var e,t=this.instance.get_property(gt);return(null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recorderVersion)||t||"v1"}},{key:"networkPayloadCapture",get:function(){var n,s,e=this.instance.get_property(ht),t={recordHeaders:null===(n=this.instance.config.session_recording)||void 0===n?void 0:n.recordHeaders,recordBody:null===(s=this.instance.config.session_recording)||void 0===s?void 0:s.recordBody},o=t?.recordHeaders||e?.recordHeaders,i=t?.recordBody||e?.recordBody,a=this.instance.config.capture_performance||e?.capturePerformance;return o||i||a?{recordHeaders:o,recordBody:i,recordPerformance:a}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?_(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":Oe(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var s,o,i,a,r=this.sessionId!==e;S(this._sampleRate)?(i=this.isSampled,r||!Oe(i)?s=Math.random()<this._sampleRate:s=i,s||t.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),null===(o=this.instance.persistence)||void 0===o||o.register(n({},me,s))):null===(a=this.instance.persistence)||void 0===a||a.register(n({},me,null))}},{key:"afterDecideResponse",value:function(e){var t,s,a,r,c,l,d,u,h,m,f,g,p=this;this.instance.persistence&&this.instance.persistence.register((n(t={},ze,!!e.sessionRecording),n(t,vt,null===(c=e.sessionRecording)||void 0===c?void 0:c.consoleLogRecordingEnabled),n(t,gt,null===(l=e.sessionRecording)||void 0===l?void 0:l.recorderVersion),n(t,ht,o({capturePerformance:e.capturePerformance},null===(d=e.sessionRecording)||void 0===d?void 0:d.networkPayloadCapture)),t)),s=null===(r=e.sessionRecording)||void 0===r?void 0:r.sampleRate,this._sampleRate=i(s)||O(s)?null:parseFloat(s),f=null===(h=e.sessionRecording)||void 0===h?void 0:h.minimumDurationMilliseconds,(this._minimumDuration=i(f)?null:f,this._linkedFlag=(null===(u=e.sessionRecording)||void 0===u?void 0:u.linkedFlag)||null,null!==(a=e.sessionRecording)&&void 0!==a&&a.endpoint)&&(this._endpoint=null===(m=e.sessionRecording)||void 0===m?void 0:m.endpoint),(S(this._sampleRate)&&this.sessionManager.onSessionId(function(e){p.makeSamplingDecision(e)}),_(this._linkedFlag))&&(g=this._linkedFlag,this.instance.onFeatureFlags(function(e){p._linkedFlagSeen=e.includes(g)})),this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:pt()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e,n=this;!i(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording&&(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),e="v2"===this.recordingVersion?"recorder-v2.js":"recorder.js",this.instance.__loaded_recorder_version!==this.recordingVersion?ue(this.instance.config.api_host+"/static/".concat(e,"?v=").concat(R.LIB_VERSION),function(s){if(s)return t.error("Could not load ".concat(e),s);n._onScriptLoaded()}):this._onScriptLoaded())}},{key:"_isInteractiveEvent",value:function(e){var t;return e.type===Dt&&-1!==ln.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}},{key:"_updateWindowAndSessionIds",value:function(e){if(t=this._isInteractiveEvent(e),t||this.isIdle||e.timestamp-this._lastActivityTimestamp>qt&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:qt})),n=!1,t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var t,n,s=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),o=s.windowId,i=s.sessionId,a=this.sessionId!==i,r=this.windowId!==o;this.windowId=o,this.sessionId=i,(n||-1===[Tt,xn].indexOf(e.type)&&(r||a))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(e){return t.error("[Session-Recording] using rrweb when not started.",e),!1}}},{key:"_tryAddCustomEvent",value:function(e,t){var n=this;return this._tryRRwebMethod(function(){var s;return null===(s=n.rrwebRecord)||void 0===s?void 0:s.addCustomEvent(e,t)})}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod(function(){var t;return null===(t=e.rrwebRecord)||void 0===t?void 0:t.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){n=this,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},this.rrwebRecord=e.rrweb?e.rrweb.record:e.rrwebRecord;for(var n,s,i,r,u=this.instance.config.session_recording,a=0,c=Object.entries(u||{});a<c.length;a++){var l=k(c[a],2),d=l[0],h=l[1];d in s&&(s[d]=h)}this.rrwebRecord?(this.mutationRateLimiter=null!==(i=this.mutationRateLimiter)&&void 0!==i?i:new jn(this.rrwebRecord,{onBlockedNode:function(e,s){var o="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");t.info(o,{node:s}),n.log("[PostHog Recorder] "+o,"warn")}}),r=this._gatherRRWebPlugins(),this.stopRrweb=this.rrwebRecord(o({emit:function(e){n.onRRwebEmit(e)},plugins:r},s)),this.instance._addCaptureHook(function(s){try{if("$pageview"===s){var o=e?n._maskUrl(e.location.href):"";if(!o)return;n._tryAddCustomEvent("$pageview",{href:o})}}catch(e){t.error("Could not add $pageview to rrweb session",e)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:s,activePlugins:r.map(function(e){return e?.name})})):t.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return(v.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(v.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&x(v.getRecordNetworkPlugin))&&(!An.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(v.getRecordNetworkPlugin(hn(this.instance.config,this.networkPayloadCapture))):t.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&z(e)){if(e.type===Ht.Meta){if(t=this._maskUrl(e.data.href),!t)return;e.data.href=t}if(n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e,n){var t,n,o,s=function(e){if(t=e,t&&z(t)&&t.type===On&&z(t.data)&&t.data.plugin===yn){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var t,s=[],n=0;n<t.data.payload.payload.length;n++)t.data.payload.payload[n]&&t.data.payload.payload[n].length>2e3?s.push(t.data.payload.payload[n].slice(0,2e3)+"...[truncated]"):s.push(t.data.payload.payload[n]);return t.data.payload.payload=s,e}return e}(n),i=JSON.stringify(s).length;this._updateWindowAndSessionIds(s),!this.isIdle&&(o={$snapshot_bytes:i,$snapshot_data:s,$session_id:this.sessionId,$window_id:this.windowId},"disabled"!==this.status?this._captureSnapshotBuffered(o):this.clearBuffer())}}}},{key:"_maskUrl",value:function(e){var t,n,s=this.instance.config.session_recording;return s.maskNetworkRequestFn?(n={url:e},null===(t=n=s.maskNetworkRequestFn(n))||void 0===t?void 0:t.url):e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){t=this,this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var t,n=this._minimumDuration,e=this.sessionDuration,s=S(e)&&e>=0,o=S(n)&&s&&e<n;return"buffering"===this.status||o?(this.flushBufferTimer=setTimeout(function(){t._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var t,n=this,s=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+s>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),O(this.buffer.sessionId)&&!O(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){n._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===Tt}})}}]),s}(),ts=function(){function n(e){d(this,n),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return u(n,[{key:"call",value:function(){var e=this,t=Ze(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(W),group_properties:this.instance.get_property(T),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:t,verbose:!0},{method:"POST"},function(t){return e.parseDecideResponse(t)})}},{key:"parseDecideResponse",value:function(n){if(o=this,this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),0!==n?.status){{if(!s||!s.body)return t.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){o.parseDecideResponse(n)},500);if(this.instance.toolbar.afterDecideResponse(n),null===(r=this.instance.sessionRecording)||void 0===r||r.afterDecideResponse(n),F.afterDecideResponse(n,this.instance),this.instance._afterDecideResponse(n),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(n),l=e?.extendPostHogWithSurveys,n.surveys&&!l&&ue(this.instance.config.api_host+"/static/surveys.js",function(n){if(n)return t.error("Could not load surveys script",n);e.extendPostHogWithSurveys(o.instance)}),d=e?.extendPostHogWithExceptionAutoCapture,n.autocaptureExceptions&&n.autocaptureExceptions&&i(d)&&ue(this.instance.config.api_host+"/static/exception-autocapture.js",function(s){if(s)return t.error("Could not load exception autocapture script",s);e.extendPostHogWithExceptionAutocapture(o.instance,n)}),n.siteApps)if(this.instance.config.opt_in_site_apps){var o,r,l,d,u,h,c=this.instance.config.api_host,a=U(n.siteApps);try{h=function(){var n=u.value,s=n.id,e=n.url,i=[c,"/"===c[c.length-1]&&"/"===e[0]?e.substring(1):e].join("");v["__$$ph_site_app_".concat(s)]=o.instance,ue(i,function(e){e&&t.error("Error while initializing PostHog app with config id ".concat(s),e)})};for(a.s();!(u=a.n()).done;)h()}catch(e){a.e(e)}finally{a.f()}}else n.siteApps.length>0&&t.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}else t.error("Failed to fetch feature flags from PostHog.")}}]),n}(),Qt=["https://app.posthog.com","https://eu.posthog.com"],Zt=["source"],Jt=e!=null&&e.location?ce(e.location.hash,"__posthog")||ce(location.hash,"state"):null,en=function(){function n(e){d(this,n),this.instance=e}return u(n,[{key:"afterDecideResponse",value:function(e){var t=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&t.toolbarVersion&&0===t.toolbarVersion.indexOf("toolbar")&&this.loadToolbar(o({},t))}},{key:"maybeLoadToolbar",value:function(){var n,o,a,r,c,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e||!s)return!1;t=null!==(r=t)&&void 0!==r?r:e.location,i=null!==(c=i)&&void 0!==c?c:e.history;try{if(!l){try{e.localStorage.setItem("test","test"),e.localStorage.removeItem("test")}catch{return!1}l=e?.localStorage}return a=Jt||ce(t.hash,"__posthog")||ce(t.hash,"state"),o=a?ut(function(){return JSON.parse(atob(decodeURIComponent(a)))})||ut(function(){return JSON.parse(decodeURIComponent(a))}):null,o&&"ph_authorize"===o.action?((n=o).source="url",n&&Object.keys(n).length>0&&(o.desiredHash?t.hash=o.desiredHash:i?i.replaceState("",s.title,t.pathname+t.search):t.hash="")):((n=JSON.parse(l.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete n.userIntent),!!n.token&&this.instance.config.token===n.token&&(this.loadToolbar(n),!0)}catch{return!1}}},{key:"loadToolbar",value:function(n){if(i=this,!e||v._postHogToolbarLoaded)return!1;v._postHogToolbarLoaded=!0;var i,c,a=this.instance.config.api_host,r=3e5,l=Math.floor(Date.now()/r)*r,d="".concat(a).concat(a.endsWith("/")?"":"/","static/toolbar.js?t=").concat(l),u=!Qt.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,s=o(o({token:this.instance.config.token},n),{},{apiURL:a},u?{instrument:!1}:{});return s.source,c=Xs(s,Zt),e.localStorage.setItem("_postHogToolbarParams",JSON.stringify(c)),ue(d,function(e){e?t.error("Failed to load toolbar",e):(v.ph_load_toolbar||v.ph_load_editor)(s,i.instance)}),J(e,"turbolinks:load",function(){v._postHogToolbarLoaded=!1,i.loadToolbar(s)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}]),n}(),tn="__ph_opt_in_out_";function oo(e,t){Gt(!0,e,t)}function so(e,t){Gt(!1,e,t)}function no(e,t){return"1"===dn(e,t)}function an(t,n){return!!function(t){if(t&&t.respectDnt){var n=t&&t.window||e,s=n?.navigator,o=!1;return r([s?.doNotTrack,s.msDoNotTrack,n.doNotTrack],function(e){a([!0,1,"1","yes"],e)&&(o=!0)}),o}return!1}(n)||"0"===dn(t,n)}function to(e,t){at(t=t||{}).remove(Yt(e,t),!!t.crossSubdomainCookie)}function at(e){return"localStorage"===(e=e||{}).persistenceType?h:"localStorage+cookie"===e.persistenceType?G:E}function Yt(e,t){return((t=t||{}).persistencePrefix||tn)+e}function dn(e,t){return at(t).get(Yt(e,t))}function Gt(e,n,s){_(n)&&n.length?(at(s=s||{}).set(Yt(n,s),e?1:0,S(s.cookieExpiration)?s.cookieExpiration:null,s.crossSubdomainCookie,s.secureCookie),s.capture&&e&&s.capture(s.captureEventName||"$opt_in",s.captureProperties||{},{send_instantly:!0})):t.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}Ut=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;d(this,e),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=t}return u(e,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return(new Date).getTime()}}]),e}(),mn=function(){is(t,Ut);var n=Fn(t);function t(e){var s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return d(this,t),(s=n.call(this,o)).handlePollRequest=e,s}return u(t,[{key:"enqueue",value:function(e,t,n){this._event_queue.push({url:e,data:t,options:n}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(e._event_queue.length>0){var s,t=e.formatQueue(),n=function(n){var o=t[n],i=o.url,s=o.data,a=o.options;r(s,function(t,n){s[n].offset=Math.abs(s[n].timestamp-e.getTime()),delete s[n].timestamp}),e.handlePollRequest(i,s,a)};for(s in t)n(s);e._event_queue.length=0,e._empty_queue_count=0}else e._empty_queue_count++;e._empty_queue_count>4&&(e.isPolling=!1,e._empty_queue_count=0),e.isPolling&&e.poll()},this._pollInterval)}},{key:"unload",value:function(){var e,t,n=this;clearTimeout(this._poller),t=this._event_queue.length>0?this.formatQueue():{},this._event_queue.length=0,e=Object.values(t),[].concat(bt(e.filter(function(e){return 0===e.url.indexOf("/e")})),bt(e.filter(function(e){return 0!==e.url.indexOf("/e")}))).map(function(e){var t=e.url,s=e.data,i=e.options;n.handlePollRequest(t,s,o(o({},i),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var e={};return r(this._event_queue,function(t){var o=t.url,a=t.data,s=t.options,n=(s?s._batchKey:null)||o;i(e[n])&&(e[n]={data:[],url:o,options:s}),s&&e[n].options&&e[n].options._metrics&&!e[n].options._metrics.rrweb_full_snapshot&&(e[n].options._metrics.rrweb_full_snapshot=s._metrics.rrweb_full_snapshot),e[n].data.push(a)}),e}}]),t}(),w=Uint8Array,j=Uint16Array,$=Uint32Array,ke=new w([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ae=new w([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pt=new w([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rt=function(e,t){for(var o,i,s=new j(31),n=0;n<31;++n)s[n]=t+=1<<e[n-1];i=new $(s[30]);for(n=1;n<30;++n)for(o=s[n];o<s[n+1];++o)i[o]=o-s[n]<<5|n;return[s,i]},Lt=Rt(ke,2),wn=Lt[0],Se=Lt[1],wn[28]=258,Se[258]=28;for(Mt=Rt(Ae,0)[1],Fe=new j(32768),c=0;c<32768;++c)N=(43690&c)>>>1|(21845&c)<<1,N=(61680&(N=(52428&N)>>>2|(13107&N)<<2))>>>4|(3855&N)<<4,Fe[c]=((65280&N)>>>8|(255&N)<<8)>>>1;Z=function(e,t,n){for(var a=e.length,s=0,c=new j(t);s<a;++s)++c[e[s]-1];i=new j(t);for(s=0;s<t;++s)i[s]=i[s-1]+c[s-1]<<1;if(n){{o=new j(1<<t),l=15-t;for(s=0;s<a;++s)if(e[s])for(var o,i,l,u=s<<4|e[s],d=t-e[s],r=i[e[s]-1]++<<d,h=r|(1<<d)-1;r<=h;++r)o[Fe[r]>>>l]=u}}else for(o=new j(a),s=0;s<a;++s)o[s]=Fe[i[e[s]-1]++]>>>15-e[s];return o},H=new w(288);for(c=0;c<144;++c)H[c]=8;for(c=144;c<256;++c)H[c]=9;for(c=256;c<280;++c)H[c]=7;for(c=280;c<288;++c)H[c]=8;se=new w(32);for(c=0;c<32;++c)se[c]=5;Tn=Z(H,9,0),zn=Z(se,5,0),ft=function(e){return(e/8>>0)+(7&e&&1)},mt=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var s=new(e instanceof j?j:e instanceof $?$:w)(n-t);return s.set(e.subarray(t,n)),s},A=function(e,t,n){n<<=7&t;var s=t/8>>0;e[s]|=n,e[s+1]|=n>>>8},ee=function(e,t,n){n<<=7&t;var s=t/8>>0;e[s]|=n,e[s+1]|=n>>>8,e[s+2]|=n>>>16},Le=function(e,t){for(s=[],n=0;n<e.length;++n)e[n]&&s.push({s:n,f:e[n]});if(a=s.length,i=s.slice(),!a)return[new w(0),0];if(1==a)return g=new w(s[0].s+1),g[s[0].s]=1,[g,1];s.sort(function(e,t){return e.f-t.f}),s.push({s:-1,f:25001});var n,s,o,i,a,c,m,p,g,v,b,l=s[0],d=s[1],u=0,h=1,f=2;for(s[0]={s:-1,f:l.f+d.f,l,r:d};h!=a-1;)l=s[s[u].f<s[f].f?u++:f++],d=s[u!=h&&s[u].f<s[f].f?u++:f++],s[h++]={s:-1,f:l.f+d.f,l,r:d};m=i[0].s;for(n=1;n<a;++n)i[n].s>m&&(m=i[n].s);if(o=new j(m+1),c=Hn(s[h-1],o,0),c>t){n=0;var r=0,y=c-t,_=1<<y;for(i.sort(function(e,t){return o[t.s]-o[e.s]||e.f-t.f});n<a;++n){if(p=i[n].s,!(o[p]>t))break;r+=_-(1<<c-o[p]),o[p]=t}for(r>>>=y;r>0;)v=i[n].s,o[v]<t?r-=1<<t-o[v]++-1:++n;for(;n>=0&&r;--n)b=i[n].s,o[b]==t&&(--o[b],++r);c=t}return[new w(o),c]},Hn=function e(t,n,s){return-1==t.s?Math.max(e(t.l,n,s+1),e(t.r,n,s+1)):n[t.s]=s},dt=function(e){for(n=e.length;n&&!e[--n];);for(var n,a=new j(++n),r=0,o=e[0],t=1,s=function(e){a[r++]=e},i=1;i<=n;++i)if(e[i]==o&&i!=n)++t;else{if(!o&&t>2){for(;t>138;t-=138)s(32754);t>2&&(s(t>10?t-11<<5|28690:t-3<<5|12305),t=0)}else if(t>3){for(s(o),--t;t>6;t-=6)s(8304);t>2&&(s(t-3<<5|8208),t=0)}for(;t--;)s(o);t=1,o=e[i]}return[a.subarray(0,r),n]},te=function(e,t){for(var s=0,n=0;n<t.length;++n)s+=e[n]*t[n];return s},le=function(e,t,n){var o,i=n.length,s=ft(t+2);e[s]=255&i,e[s+1]=i>>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(o=0;o<i;++o)e[s+o+4]=n[o];return 8*(s+4+i)},Ye=function(e,t,n,s,o,i,a,r,c,l,d){A(t,d++,n),++o[256];for(var h,p,g,O,N,L,F=Le(o,15),_=F[0],W=F[1],P=Le(i,15),w=P[0],$=P[1],R=dt(_),C=R[0],I=R[1],T=dt(w),k=T[0],B=T[1],m=new j(19),u=0;u<C.length;++u)m[31&C[u]]++;for(u=0;u<k.length;++u)m[31&k[u]]++;for(var D=Le(m,7),y=D[0],V=D[1],f=19;f>4&&!y[Pt[f-1]];--f);var v,b,x,M,z=l+5<<3,S=te(o,H)+te(i,se)+a,E=te(o,_)+te(i,w)+a+14+3*f+te(m,y)+(2*m[16]+3*m[17]+7*m[18]);if(z<=S&&z<=E)return le(t,d,e.subarray(c,c+l));if(A(t,d,1+(E<S)),d+=2,E<S){b=Z(_,W,0),v=_,M=Z(w,$,0),x=w,N=Z(y,V,0),A(t,d,I-257),A(t,d+5,B-1),A(t,d+10,f-4),d+=14;for(u=0;u<f;++u)A(t,d+3*u,y[Pt[u]]);d+=3*f;for(L=[C,k],O=0;O<2;++O){g=L[O];for(u=0;u<g.length;++u)h=31&g[u],A(t,d,N[h]),d+=y[h],h>15&&(A(t,d,g[u]>>>5&127),d+=g[u]>>>12)}}else b=Tn,v=H,M=zn,x=se;for(u=0;u<r;++u)s[u]>255?(h=s[u]>>>18&31,ee(t,d,b[h+257]),d+=v[h+257],h>7&&(A(t,d,s[u]>>>23&31),d+=ke[h]),p=31&s[u],ee(t,d,M[p]),d+=x[p],p>3&&(ee(t,d,s[u]>>>5&8191),d+=Ae[p])):(ee(t,d,b[s[u]]),d+=v[s[u]]);return ee(t,d,b[256]),d+v[256]},Wn=new $([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Un=new w(0),Kn=function(){for(var e,s,n=new $(256),t=0;t<256;++t){for(e=t,s=9;--s;)e=(1&e&&3988292384)^e>>>1;n[t]=e}return n}(),qn=function(){var e=4294967295;return{p:function(t){for(var n=e,s=0;s<t.length;++s)n=Kn[255&n^t[s]]^n>>>8;e=n},d:function(){return 4294967295^e}}},Yn=function(e,t,n,s,o){return function(e,t,n,s,o,i){var u=e.length,D=new w(s+u+5*(1+Math.floor(u/7e3))+o),m=D.subarray(s,D.length-o),c=0;if(!t||u<8)for(a=0;a<=u;a+=65535)A=a+65535,A<u?c=le(m,c,e.subarray(a,A)):(m[a]=i,c=le(m,c,e.subarray(a,u)));else{for(var a,r,l,v,x,A,S,M,T,N,R,H=Wn[t-1],G=H>>>13,U=8191&H,V=(1<<n)-1,k=new j(32768),B=new j(V+1),L=Math.ceil(n/3),Y=2*L,I=function(t){return(e[t]^e[t+1]<<L^e[t+2]<<Y)&V},C=new $(25e3),y=new j(288),E=new j(32),z=0,O=0,g=(a=0,0),P=0,b=0;a<u;++a){var F=I(a),p=32767&a,f=B[F];if(k[p]=f,B[F]=p,P<=a){if(v=u-a,(z>7e3||g>24576)&&v>423){c=Ye(e,m,0,C,y,E,O,g,b,a-b,c),g=z=O=0,b=a;for(r=0;r<286;++r)y[r]=0;for(r=0;r<30;++r)E[r]=0}var h=2,_=0,X=U,d=p-f&32767;if(v>2&&F==I(a-d))for(var W=Math.min(G,v)-1,q=Math.min(32767,a),K=Math.min(258,v);d<=q&&--X&&p!=f;){if(e[a+h]==e[a+h-d]){for(l=0;l<K&&e[a+l]==e[a+l-d];++l);if(l>h){if(h=l,_=d,l>W)break;R=Math.min(d,l-2),N=0;for(r=0;r<R;++r)x=a-d+r+32768&32767,T=x-k[x]+32768&32767,T>N&&(N=T,f=x)}}d+=(p=f)-(f=k[p])+32768&32767}_?(C[g++]=268435456|Se[h]<<18|Mt[_],M=31&Se[h],S=31&Mt[_],O+=ke[M]+Ae[S],++y[257+M],++E[S],P=a+h,++z):(C[g++]=e[a],++y[e[a]])}}c=Ye(e,m,i,C,y,E,O,g,b,a-b,c),i||(c=le(m,c,Un))}return mt(D,0,s+ft(c)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,s,!o)},He=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Xn=function(e,t){var n,s=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&He(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),s){e[3]=8;for(n=0;n<=s.length;++n)e[n+10]=s.charCodeAt(n)}},Qn=function(e){return 10+(e.filename&&e.filename.length+1||0)};function Ks(e,t){void 0===t&&(t={});var n,s,o=qn(),i=e.length;return o.p(e),n=Yn(e,t,Qn(t),8),s=n.length,Xn(n,t),He(n,s-8,o.d()),He(n,s-4,i),n}function Gs(e,t){if(r=e.length,!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n,r,c,o=new w(e.length+(e.length>>>1)),a=0,s=function(e){o[a++]=e},i=0;i<r;++i)a+5>o.length&&(c=new w(a+8+(r-i<<1)),c.set(o),o=c),n=e.charCodeAt(i),n<128||t?s(n):n<2048?(s(192|n>>>6),s(128|63&n)):n>55295&&n<57344?(s(240|(n=65536+(1047552&n)|1023&e.charCodeAt(++i))>>>18),s(128|n>>>12&63),s(128|n>>>6&63),s(128|63&n)):(s(224|n>>>12),s(128|n>>>6&63),s(128|63&n));return mt(o,0,a)}!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(I||(I={})),st=function(e,t,n){var o,a,c,l,d,s=t||{};if(s.ip=n.ip?1:0,s._=(new Date).getTime().toString(),s.ver=R.LIB_VERSION,a=e.split("?"),a.length>1){o=U(a[1].split("&"));try{for(o.s();!(l=o.n()).done;)c=l.value.split("=")[0],i(s[c])||delete s[c]}catch(e){o.e(e)}finally{o.f()}}return d=e.indexOf("?")>-1?"&":"?",e+d+function(e){var n,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",t=[];return r(e,function(e,o){i(e)||i(o)||"undefined"===o||(n=encodeURIComponent(e.toString()),s=encodeURIComponent(o),t[t.length]=s+"="+n)}),t.join(o)}(s)},Be=function e(t,n){if(n.blob&&t.buffer)return new Blob([$t(t)?t:t.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var s,o=e(t,{method:"POST"});return new Blob([o],{type:"application/x-www-form-urlencoded"})}return"POST"!==n.method?null:(s=f(t)||$t(t)?"data="+encodeURIComponent(t):"data="+encodeURIComponent(t.data),"compression"in t&&t.compression&&(s+="&compression="+t.compression),s)},Xe=function(e){var n,h,a=e.url,c=e.data,l=e.headers,s=e.options,o=e.callback,i=e.retriesPerformedSoFar,f=e.retryQueue,d=e.onXHRError,u=e.timeout,p=void 0===u?6e4:u,m=e.onResponse;S(i)&&i>0&&(a=st(a,{retry_count:i},{})),n=new XMLHttpRequest,n.open(s.method||"GET",a,!0),h=Be(c,s),r(l,function(e,t){n.setRequestHeader(t,e)}),"POST"!==s.method||s.blob||n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.timeout=p,n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState)if(m==null||m(n),200===n.status){if(o){var e;try{e=JSON.parse(n.responseText)}catch(e){return void t.error(e)}o(e)}}else x(d)&&d(n),(n.status<400||n.status>500)&&f.enqueue({url:a,data:c,options:s,headers:l,retriesPerformedSoFar:(i||0)+1,callback:o}),o==null||o({status:0})},n.send(h)},ss=18e5,os=function(){is(s,Ut);var a=Fn(s);function s(t,n){var o;return d(this,s),(o=a.call(this)).isPolling=!1,o.queue=[],o.areWeOnline=!0,o.onXHRError=t,o.rateLimiter=n,!i(e)&&"onLine"in e.navigator&&(o.areWeOnline=e.navigator.onLine,e.addEventListener("online",function(){o._handleWeAreNowOnline()}),e.addEventListener("offline",function(){o.areWeOnline=!1})),o}return u(s,[{key:"enqueue",value:function(e){if(n=e.retriesPerformedSoFar||0,!(n>=10)){var n,s,o=function(e){var t=3e3*Math.pow(2,e),s=t/2,n=Math.min(ss,t),o=(Math.random()-.5)*(n-s);return Math.ceil(n+o)}(n),i=new Date(Date.now()+o);this.queue.push({retryAt:i,requestData:e}),s="Enqueued failed request for retry in ".concat(o),navigator.onLine||(s+=" (Browser is offline)"),t.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var e=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()},this._pollInterval)}},{key:"flush",value:function(){var e,s,o,t=new Date(Date.now()),n=this.queue.filter(function(e){return e.retryAt<t});if(n.length>0){this.queue=this.queue.filter(function(e){return e.retryAt>=t}),e=U(n);try{for(e.s();!(s=e.n()).done;)o=s.value.requestData,this._executeXhrRequest(o)}catch(t){e.e(t)}finally{e.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0),n=U(this.queue);try{for(n.s();!(i=n.n()).done;){var n,i,s=i.value.requestData,r=s.url,c=s.data,a=s.options;if(this.rateLimiter.isRateLimited(a._batchKey))t.warn("[RetryQueue] is quota limited. Dropping request.");else try{e==null||e.navigator.sendBeacon(r,Be(c,o(o({},a),{},{sendBeacon:!0})))}catch(e){t.error(e)}}}catch(e){n.e(e)}finally{n.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(e){var n=e.url,s=e.data,t=e.options,o=e.headers,i=e.callback,a=e.retriesPerformedSoFar;this.rateLimiter.isRateLimited(t._batchKey)||Xe({url:n,data:s||{},options:t||{},headers:o||{},retriesPerformedSoFar:a||0,callback:i,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),s}(),ae=1800,Qe=60,cs=864e5,ls=function(){function s(e,o,i,a){d(this,s),n(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=o,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||P,this._windowIdGenerator=a||P;var c,u,l=e.persistence_name||e.token,r=e.session_idle_timeout_seconds||ae;(S(r)?r>ae?t.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):r<Qe&&t.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(t.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),r=ae),this._sessionTimeoutMs=1e3*Math.min(Math.max(r,Qe),ae),this._window_id_storage_key="ph_"+l+"_window_id",this._primary_window_exists_storage_key="ph_"+l+"_primary_window_exists",this._canUseSessionStorage())&&(c=g.parse(this._window_id_storage_key),u=g.parse(this._primary_window_exists_storage_key),c&&!u?this._windowId=c:g.remove(this._window_id_storage_key),g.set(this._primary_window_exists_storage_key,!0)),this._listenToReloadWindow()}return u(s,[{key:"onSessionId",value:function(e){var t=this;return i(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter(function(t){return t!==e})}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&g.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&g.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?g.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,t,s){e===this._sessionId&&t===this._sessionActivityTimestamp&&s===this._sessionStartTimestamp||(this._sessionStartTimestamp=s,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register(n({},fe,[t,e,s])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[fe];return f(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var t=this;e==null||e.addEventListener("beforeunload",function(){t._canUseSessionStorage()&&g.remove(t._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var r,d,c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),i=k(this._getSessionId(),3),o=i[0],n=i[1],t=i[2],e=this._getWindowId(),l=t&&t>0&&Math.abs(s-t)>cs,a=!1,u=!n,h=!c&&Math.abs(s-o)>this._sessionTimeoutMs;return u||h||l?(n=this._sessionIdGenerator(),e=this._windowIdGenerator(),t=s,a=!0):e||(e=this._windowIdGenerator(),a=!0),d=0===o||!c||l?s:o,r=0===t?(new Date).getTime():t,this._setWindowId(e),this._setSessionId(n,d,r),a&&this._sessionIdChangedHandlers.forEach(function(t){return t(n,e)}),{sessionId:n,windowId:e,sessionStartTimestamp:r}}}]),s}(),ds=u(function e(t,n,s,o){d(this,e),this.name="posthog-js",this.setupOnce=function(e){e(function(e){if("error"!==e.level||!t.__loaded)return e;e.tags||(e.tags={}),u=t.config.ui_host||t.config.api_host,e.tags["PostHog Person URL"]=u+"/person/"+t.get_distinct_id(),t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var a,r,c,l,d,u,i=(null===(a=e.exception)||void 0===a?void 0:a.values)||[],h={$exception_message:null===(r=i[0])||void 0===r?void 0:r.value,$exception_type:null===(c=i[0])||void 0===c?void 0:c.type,$exception_personURL:u+"/person/"+t.get_distinct_id(),$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:null===(l=i[0])||void 0===l?void 0:l.value,$sentry_exception_type:null===(d=i[0])||void 0===d?void 0:d.type,$sentry_tags:e.tags};return n&&s&&(h.$sentry_url=(o||"https://sentry.io/organizations/")+n+"/issues/?project="+s+"&query="+e.event_id),t.capture("$exception",h),e})}}),us=function(e){Promise&&Promise.resolve||t.warn("This browser does not have Promise support, and can not use the segment integration");var n=function(t,n){t.event.userId||t.event.anonymousId===e.get_distinct_id()||e.reset(),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(e.register({distinct_id:t.event.userId}),e.reloadFeatureFlags());var s=e._calculate_event_properties(n,t.event.properties);return t.event.properties=Object.assign({},s,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return n(e,e.event.event)},page:function(e){return n(e,"$pageview")},identify:function(e){return n(e,"$identify")},screen:function(e){return n(e,"$screen")}}},hs=function(){function t(){var e=this;d(this,t),n(this,"_hasSeenPageView",!1),n(this,"_updateScrollData",function(){e._pageViewData||(e._pageViewData=e._createPageViewData());var n,s,o,i,t=e._pageViewData,a=e._scrollY(),c=e._scrollHeight(),r=e._contentY(),l=e._contentHeight();t.lastScrollY=a,t.maxScrollY=Math.max(a,null!==(n=t.maxScrollY)&&void 0!==n?n:0),t.maxScrollHeight=Math.max(c,null!==(s=t.maxScrollHeight)&&void 0!==s?s:0),t.lastContentY=r,t.maxContentY=Math.max(r,null!==(o=t.maxContentY)&&void 0!==o?o:0),t.maxContentHeight=Math.max(l,null!==(i=t.maxContentHeight)&&void 0!==i?i:0)})}return u(t,[{key:"_createPageViewData",value:function(){var t;return{pathname:null!==(t=e?.location.pathname)&&void 0!==t?t:""}}},{key:"doPageView",value:function(){var e,t;return this._hasSeenPageView?(e=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,e=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),o({$prev_pageview_pathname:null===(t=e)||void 0===t?void 0:t.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return o({$prev_pageview_pathname:e?.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||null==e.maxScrollHeight||null==e.lastScrollY||null==e.maxScrollY||null==e.maxContentHeight||null==e.lastContentY||null==e.maxContentY)return{};var t=e.maxScrollHeight,s=e.lastScrollY,o=e.maxScrollY,n=e.maxContentHeight,i=e.lastContentY,a=e.maxContentY;return t=Math.ceil(t),s=Math.ceil(s),o=Math.ceil(o),n=Math.ceil(n),i=Math.ceil(i),a=Math.ceil(a),{$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:t<=1?1:We(s/t,0,1),$prev_pageview_max_scroll:o,$prev_pageview_max_scroll_percentage:t<=1?1:We(o/t,0,1),$prev_pageview_last_content:i,$prev_pageview_last_content_percentage:n<=1?1:We(i/n,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:n<=1?1:We(a/n,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){e==null||e.addEventListener("scroll",this._updateScrollData),e==null||e.addEventListener("scrollend",this._updateScrollData),e==null||e.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){e==null||e.removeEventListener("scroll",this._updateScrollData),e==null||e.removeEventListener("scrollend",this._updateScrollData),e==null||e.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return e?Math.max(0,e.document.documentElement.scrollHeight-e.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return e&&(e.scrollY||e.pageYOffset||e.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return e?.document.documentElement.scrollHeight||0}},{key:"_contentY",value:function(){var t=e?.document.documentElement.clientHeight||0;return this._scrollY()+t}}]),t}();function We(e,t,n){return Math.max(t,Math.min(e,n))}vs={icontains:function(t){return!!e&&e.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},regex:function(t){return!!e&&En(e.location.href,t)},exact:function(t){return e?.location.href===t}},bs=function(){function e(t){d(this,e),this.instance=t}return u(e,[{key:"getSurveys",value:function(e){var s=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.instance.get_property($e);if(t&&!o)return e(t);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(t){var o,i=t.surveys||[];return null===(o=s.instance.persistence)||void 0===o||o.register(n({},$e,i)),e(i)})}},{key:"getActiveMatchingSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys(function(n){var o=n.filter(function(e){return!!e.start_date&&!e.end_date}).filter(function(e){if(!e.conditions)return!0;var t,n,o,i,a=null===(t=e.conditions)||void 0===t||!t.url||vs[null!==(n=null===(o=e.conditions)||void 0===o?void 0:o.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),r=null===(i=e.conditions)||void 0===i||!i.selector||s?.querySelector(e.conditions.selector);return a&&r}).filter(function(e){if(!e.linked_flag_key&&!e.targeting_flag_key)return!0;var n=!e.linked_flag_key||t.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),s=!e.targeting_flag_key||t.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key);return n&&s});return e(o)},n)}}]),e}(),js=6e4,ys=function(){function e(){var s=this;d(this,e),n(this,"limits",{}),n(this,"checkForLimiting",function(e){try{var n=e.responseText;if(!n||!n.length)return;(JSON.parse(n).quota_limited||[]).forEach(function(e){t.info("[RateLimiter] ".concat(e||"events"," is quota limited.")),s.limits[e]=(new Date).getTime()+js})}catch(e){return void t.error(e)}})}return u(e,[{key:"isRateLimited",value:function(e){var t=this.limits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}]),e}(),_s=function(){return o({initialPathName:e?.location.pathname||"",referringDomain:m.referringDomain()},m.campaignParams())},ws=function(){function e(t,s,o){var i=this;d(this,e),n(this,"_onSessionIdCallback",function(e){var s,t=i._getStoredProps();(!t||t.sessionId!==e)&&(s={sessionId:e,props:i._sessionSourceParamGenerator()},i._persistence.register(n({},qe,s)))}),this._sessionIdManager=t,this._persistence=s,this._sessionSourceParamGenerator=o||_s,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return u(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[qe]}},{key:"getSessionProps",value:function(){var t,e=null===(t=this._getStoredProps())||void 0===t?void 0:t.props;return e?{$client_session_initial_referring_host:e.referringDomain,$client_session_initial_pathname:e.initialPathName,$client_session_initial_utm_source:e.utm_source,$client_session_initial_utm_campaign:e.utm_campaign,$client_session_initial_utm_medium:e.utm_medium,$client_session_initial_utm_content:e.utm_content,$client_session_initial_utm_term:e.utm_term}:{}}}]),e}(),Os=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],Et=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Os.concat(t||[]).some(function(e){var t=e.toLowerCase();return n.includes?n.includes(t):-1!==n.indexOf(t)})},!function(e){e[e.INIT_MODULE=0]="INIT_MODULE",e[e.INIT_SNIPPET=1]="INIT_SNIPPET"}(de||(de={})),Me=function(){},ge={},y="posthog",he=e?.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,It=!he&&-1===l?.indexOf("MSIE")&&-1===l?.indexOf("Mozilla"),Bt=function(){var n,o,i;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(o=s?.location,i=o?.hostname,!!_(i)&&"herokuapp.com"!==i.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:Me,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(e==null||null===(n=e.location)||void 0===n?void 0:n.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(e){var n="Bad HTTP status: "+e.status+" "+e.statusText;t.error(n)},get_device_id:function(e){return e},_onCapture:Me,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},Ee=function(e,n,s,o){var a,r=s!==y&&b?s?b[s]:void 0:b,c={initComplete:!1,syncCode:!1},l=function(e){return function(t){c[e]||(c[e]=!0,c.initComplete&&c.syncCode&&(o==null||o(t)))}};if(r&&tt===de.INIT_MODULE)a=r;else{if(r&&!f(r))return void t.error("You have already initialized "+s);a=new Ce}return(a._init(e,n,s,l("initComplete")),a.toolbar.maybeLoadToolbar(),a.sessionRecording=new cn(a),a.sessionRecording.startRecordingIfEnabled(),a.config.__preview_measure_pageview_stats&&a.pageViewManager.startMeasuringScrollPosition(),a.__autocapture=a.config.autocapture,F._setIsAutocaptureEnabled(a),F._isAutocaptureEnabled)&&(a.__autocapture=a.config.autocapture,F.enabledForProject(a.config.token,100,100)?F.isBrowserSupported()?F.init(a):(a.__autocapture=!1,t.info("Disabling Automatic Event Collection because this browser is not supported")):(a.__autocapture=!1,t.info("Not in active bucket: disabling Automatic Event Collection."))),R.DEBUG=R.DEBUG||a.config.debug,!i(r)&&f(r)&&(a._execute_array.call(a.people,r.people),a._execute_array(r)),l("syncCode")(a),a},Ts=function(){function e(){d(this,e),n(this,"__forceAllowLocalhost",!1)}return u(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){t.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),e}(),Ce=function(){function a(){var e=this;d(this,a),n(this,"webPerformance",new Ts),this.config=Bt(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=ds,this.segmentIntegration=function(){return us(e)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new Xt(this),this.toolbar=new en(this),this.pageViewManager=new hs,this.surveys=new bs(this),this.rateLimiter=new ys,this.people={set:function(t,s,o){var i=_(t)?n({},t,s):t;e.setPersonProperties(i),o==null||o({})},set_once:function(t,s,o){var i=_(t)?n({},t,s):t;e.setPersonProperties(void 0,i),o==null||o({})}}}return u(a,[{key:"init",value:function(e,n,s){if(i(s))t.critical("You must name your new library: init(token, config, name)");else{if(s!==y){var o=Ee(e,n,s,function(e){b[s]=e,e._loaded()});return b[s]=o,o}t.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(t){var s,a,r,c,l,d,u,h,m,f,g,v,j,_,w,O=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,b=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[],s={segmentRegister:!1,syncCode:!1},a=function(e){return function(){s[e]||(s[e]=!0,s.segmentRegister&&s.syncCode&&(b==null||b(O)))}},(this.set_config(p({},Bt(),n,{name:i,token:t,callback_fn:(i===y?i:y+"."+i)+"._jsc"})),this._jsc=function(){},e!=null&&null!==(h=e.rrweb)&&void 0!==h&&h.record||e!=null&&e.rrwebRecord)&&(this.__loaded_recorder_version=e==null||null===(u=e.rrweb)||void 0===u?void 0:u.version),(this.persistence=new Ft(this.config),this._requestQueue=new mn(this._handle_queued_event.bind(this)),this._retryQueue=new os(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new ls(this.config,this.persistence),this.sessionPropsManager=new ws(this.sessionManager,this.persistence),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new Ft(o(o({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),n.segment?(this.config.get_device_id=function(){return n.segment.user().anonymousId()},n.segment.user().id()&&(this.register({distinct_id:n.segment.user().id()}),this.persistence.set_user_state("identified")),n.segment.register(this.segmentIntegration()).then(a("segmentRegister"))):a("segmentRegister")(),void 0!==(null===(f=n.bootstrap)||void 0===f?void 0:f.distinctID))&&(_=this.config.get_device_id(P()),j=null!==(c=n.bootstrap)&&void 0!==c&&c.isIdentifiedID?_:n.bootstrap.distinctID,this.persistence.set_user_state(null!==(l=n.bootstrap)&&void 0!==l&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:j})),this._hasBootstrappedFeatureFlags()&&(g=Object.keys((null===(r=n.bootstrap)||void 0===r?void 0:r.featureFlags)||{}).filter(function(e){var t,s;return!(null===(t=n.bootstrap)||void 0===t||null===(s=t.featureFlags)||void 0===s||!s[e])}).reduce(function(e,t){var s,o;return e[t]=(null===(s=n.bootstrap)||void 0===s||null===(o=s.featureFlags)||void 0===o?void 0:o[t])||!1,e},{}),w=Object.keys((null===(v=n.bootstrap)||void 0===v?void 0:v.featureFlagPayloads)||{}).filter(function(e){return g[e]}).reduce(function(e,t){var s,o,i,a;return null!==(s=n.bootstrap)&&void 0!==s&&null!==(o=s.featureFlagPayloads)&&void 0!==o&&o[t]&&(e[t]=null===(i=n.bootstrap)||void 0===i||null===(a=i.featureFlagPayloads)||void 0===a?void 0:a[t]),e},{}),this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:w})),this.get_distinct_id()||(m=this.config.get_device_id(P()),this.register_once({distinct_id:m,$device_id:m},""),this.persistence.set_user_state("anonymous")),e==null||null===(d=e.addEventListener)||void 0===d||d.call(e,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),a("syncCode")()}},{key:"_afterDecideResponse",value:function(e){if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var n,s,o={},t=U(e.supportedCompression);try{for(t.s();!(s=t.n()).done;)o[s.value]=!0}catch(e){t.e(e)}finally{t.f()}this.compression=o}null!==(n=e.analytics)&&void 0!==n&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(e){t.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&s&&this.capture("$pageview",{title:s.title},{send_instantly:!0}),e||(new ts(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Q(this.__request_queue,function(t){e._send_request.apply(e,bt(t))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,t){if(i(e))return null;if(he)return function(n){e(n,t)};var s=this._jsc,n=""+Math.floor(1e8*Math.random()),o=this.config.callback_fn+"["+n+"]";return s[n]=function(o){delete s[n],e(o,t)},o}},{key:"_handle_unload",value:function(){var e,t;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,t,n){var s=JSON.stringify(t);this.__compress_and_send_json_request(e,s,n||ge,Me)}},{key:"__compress_and_send_json_request",value:function(e,t,n,s){var a=function(e,t,n){return e===I.GZipJS?[Ks(Gs(t),{mtime:0}),o(o({},n),{},{blob:!0,urlQueryArgs:{compression:I.GZipJS}})]:[{data:Ze(t)},n]}(this.compression[I.GZipJS]?I.GZipJS:I.Base64,t,n),i=k(a,2),r=i[0],c=i[1];this._send_request(e,r,c,s)}},{key:"_send_request",value:function(n,i,a,r){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(a._batchKey))if(It)this.__request_queue.push([n,i,a,r]);else{var c,l,d,u,h={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};if(a=p(h,a||{}),he||(a.method="GET"),u=e&&"sendBeacon"in e.navigator&&"sendBeacon"===a.transport,n=st(n,a.urlQueryArgs||{},{ip:this.config.ip}),u)try{e==null||e.navigator.sendBeacon(n,Be(i,o(o({},a),{},{sendBeacon:!0})))}catch{}else if(he||!s)try{Xe({url:n,data:i,headers:this.config.xhr_headers,options:a,callback:r,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(e){t.error(e)}else c=s.createElement("script"),c.type="text/javascript",c.async=!0,c.defer=!0,c.src=n,d=s.getElementsByTagName("script")[0],null===(l=d.parentNode)||void 0===l||l.insertBefore(c,d)}}},{key:"_execute_array",value:function(e){var t,n,o=this,i=[],a=[],s=[];Q(e,function(e){e&&(t=e[0],f(t)?s.push(e):x(e)?e.call(o):f(e)&&"alias"===t?i.push(e):f(e)&&-1!==t.indexOf("capture")&&x(o[t])?s.push(e):a.push(e))}),n=function(e,t){Q(e,function(e){if(f(e[0])){var n=t;r(e,function(e){n=n[e[0]].apply(n,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)},n(i,this),n(a,this),n(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){if(s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ge,!this.__loaded||!this.sessionPersistence||!this._requestQueue)return t.uninitializedWarning("posthog.capture");if(!function(e){n=!1;try{var n,s=e.config.token,o=e.config.respect_dnt,i=e.config.opt_out_capturing_persistence_type,a=e.config.opt_out_capturing_cookie_prefix||void 0,r=e.config.window;s&&(n=an(s,{respectDnt:o,persistenceType:i,persistencePrefix:a,window:r}))}catch(e){t.error("Unexpected error when checking capturing opt-out status: "+e)}return n}(this))if(r=(s=s||ge).transport,r&&(s.transport=r),!i(e)&&_(e)){if(!l||this.config.opt_out_useragent_filter||!Et(l,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),a={uuid:P(),event:e,properties:this._calculate_event_properties(e,n||{})},"$identify"===e&&(a.$set=s.$set,a.$set_once=s.$set_once),(a=Is(a,s._noTruncate?null:this.config.properties_string_max_length)).timestamp=s.timestamp||new Date,c=o(o({},a.properties.$set),a.$set),fn(c)||this.setPersonPropertiesForFlags(c),t.info("send",a);var s,a,r,c,u=JSON.stringify(a),d=this.config.api_host+(s.endpoint||this.analyticsDefaultEndpoint),h=s!==ge;return!this.config.request_batching||h&&!s._batchKey||s.send_instantly?this.__compress_and_send_json_request(d,u,s):this._requestQueue.enqueue(d,a,s),this._invokeCaptureHooks(e,a),a}}else t.error("No event name provided to posthog.capture")}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,t){this.config._onCapture(e,t),r(this.__captureHooks,function(t){return t(e)})}},{key:"_calculate_event_properties",value:function(e,n){if(!this.persistence||!this.sessionPersistence)return n;if(h=this.persistence.remove_event_timer(e),a=o({},n),a.token=this.config.token,"$snapshot"===e)return _=o(o({},this.persistence.properties()),this.sessionPersistence.properties()),a.distinct_id=_.distinct_id,a;if(y=m.properties(),this.sessionManager){var a,c,d,u,h,g,v,j,y,_,b=this.sessionManager.checkAndGetSessionAndWindowId(),O=b.sessionId,w=b.windowId;a.$session_id=O,a.$window_id=w}return this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)&&(v=this.sessionPropsManager.getSessionProps(),a=p(a,v)),this.config.__preview_measure_pageview_stats&&(c={},"$pageview"===e?c=this.pageViewManager.doPageView():"$pageleave"===e&&(c=this.pageViewManager.doPageLeave()),a=p(a,c)),"$pageview"===e&&s&&(a.title=s.title),"$performance_event"===e?(g=this.persistence.properties(),a.distinct_id=g.distinct_id,a.$current_url=y.$current_url,a):(i(h)||(j=(new Date).getTime()-h,a.$duration=parseFloat((j/1e3).toFixed(3))),l&&this.config.opt_out_useragent_filter&&(a.$browser_type=Et(l,this.config.custom_blocked_useragents)?"bot":"browser"),a=p({},m.properties(),this.persistence.properties(),this.sessionPersistence.properties(),a),d=this.config.property_blacklist,f(d)?r(d,function(e){delete a[e]}):t.error("Invalid value for property_blacklist config: "+d),u=this.config.sanitize_properties,u&&(a=u(a,e)),a)}},{key:"register",value:function(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}},{key:"register_once",value:function(e,t,n){var s;null===(s=this.persistence)||void 0===s||s.register_once(e,t,n)}},{key:"register_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}},{key:"unregister",value:function(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}},{key:"unregister_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}},{key:"_register_single",value:function(e,t){this.register(n({},e,t))}},{key:"getFeatureFlag",value:function(e,t){return this.featureFlags.getFeatureFlag(e,t)}},{key:"getFeatureFlagPayload",value:function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}},{key:"isFeatureEnabled",value:function(e,t){return this.featureFlags.isFeatureEnabled(e,t)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}},{key:"getEarlyAccessFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}}},{key:"getSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}},{key:"getActiveMatchingSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}},{key:"identify",value:function(e,n,s){if(!this.__loaded||!this.persistence)return t.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))t.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var i,a,o=this.get_distinct_id();(this.register({$user_id:e}),!this.get_property("$device_id"))&&(i=o,this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")),e!==o&&e!==this.get_property(ve)&&(this.unregister(ve),this.register({distinct_id:e})),a="anonymous"===this.persistence.get_user_state(),e!==o&&a?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:o},{$set:n||{},$set_once:s||{}}),this.featureFlags.setAnonymousDistinctId(o)):(n||s)&&this.setPersonProperties(n,s),e!==o&&(this.reloadFeatureFlags(),this.unregister(re))}else t.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,t){(e||t)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}},{key:"group",value:function(e,s,i){if(e&&s){var a=this.getGroups();a[e]!==s&&this.resetGroupPropertiesForFlags(e),this.register({$groups:o(o({},a),{},n({},e,s))}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:s,$group_set:i}),this.setGroupPropertiesForFlags(n({},e,i))),a[e]===s||i||this.reloadFeatureFlags()}else t.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,t)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,t)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){if(!this.__loaded)return t.uninitializedWarning("posthog.reset");var n,s,o,i,a,r=this.get_property("$device_id");null===(n=this.persistence)||void 0===n||n.clear(),null===(s=this.sessionPersistence)||void 0===s||s.clear(),null===(o=this.persistence)||void 0===o||o.set_user_state("anonymous"),null===(i=this.sessionManager)||void 0===i||i.resetSessionId(),a=this.config.get_device_id(P()),this.register_once({distinct_id:a,$device_id:e?a:r},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var s,i,a,r=this.config.ui_host||this.config.api_host,o=this.sessionManager.checkAndGetSessionAndWindowId(!0),c=o.sessionId,t=o.sessionStartTimestamp,n=r+"/replay/"+c;if(e!=null&&e.withTimestamp&&t){if(i=null!==(s=e.timestampLookBack)&&void 0!==s?s:10,!t)return n;a=Math.max(Math.floor(((new Date).getTime()-t)/1e3)-i,0),n+="?t=".concat(a)}return n}},{key:"alias",value:function(e,n){return e===this.get_property(Nt)?(t.critical("Attempting to create alias for existing People user - aborting."),-2):(i(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(ve,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(t.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var t,n,s=o({},this.config);z(e)&&(p(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),"https://us.posthog.com"===this.config.api_host&&(this.config.api_host="https://app.posthog.com"),null===(t=this.persistence)||void 0===t||t.update_config(this.config),null===(n=this.sessionPersistence)||void 0===n||n.update_config(this.config),h.is_supported()&&"true"===h.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(R.DEBUG=!0),this.sessionRecording&&!i(e.disable_session_recording)&&s.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}},{key:"getSessionProperty",value:function(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}},{key:"toString",value:function(){var t,e=null!==(t=this.config.name)&&void 0!==t?t:y;return e!==y&&(e=y+"."+e),e}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&h.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!E.get("ph_optout")||(E.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var t,n,s,o,i;if(e&&e.clear_persistence)t=!0;else{if(!e||!e.enable_persistence)return;t=!1}this.config.disable_persistence||(null===(n=this.persistence)||void 0===n?void 0:n.disabled)===t||null===(o=this.persistence)||void 0===o||o.set_disabled(t),this.config.disable_persistence||(null===(s=this.sessionPersistence)||void 0===s?void 0:s.disabled)===t||null===(i=this.sessionPersistence)||void 0===i||i.set_disabled(t)}},{key:"_gdpr_call_func",value:function(e,t){return t=p({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},t||{}),h.is_supported()||"localStorage"!==t.persistence_type||(t.persistence_type="cookie"),e(this.config.token,{capture:t.capture,captureEventName:t.capture_event_name,captureProperties:t.capture_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieExpiration:t.cookie_expiration,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=p({enable_persistence:!0},e||{}),this._gdpr_call_func(oo,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var t=p({clear_persistence:!0},e||{});this._gdpr_call_func(so,t),this._gdpr_update_persistence(t)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(no,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(an,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var t=p({enable_persistence:!0},e??{});this._gdpr_call_func(to,t),this._gdpr_update_persistence(t)}},{key:"debug",value:function(t){!1===t?(e==null||e.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(e==null||e.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),a}(),!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=ct(e.prototype[t[n]])}(Ce,["identify"]),D={},As=function(){b.init=function(e,t,n){if(n)return b[n]||(b[n]=D[n]=Ee(e||"",t||{},n,function(e){b[n]=D[n]=e,e._loaded()})),b[n];var s=b;return D[y]?s=D[y]:e&&(s=Ee(e,t||{},y,function(e){D[y]=e,e._loaded()}),D[y]=s),b=s,tt===de.INIT_SNIPPET&&(v[y]=b),r(D,function(e,t){t!==y&&(b[t]=e)}),s}},ks=function(){function t(){t.done||(t.done=!0,It=!1,r(D,function(e){e._dom_loaded()}))}s!=null&&s.addEventListener&&("complete"===s.readyState?t():s.addEventListener("DOMContentLoaded",t,!1)),e&&J(e,"load",t,!0)},!function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(Ds||(Ds={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(zs||(zs={})),C=(tt=de.INIT_MODULE,b=new Ce,As(),b.init(),ks(),b),xe=-1;function oe(e,t,n){const s=document.getElementById("toast"),o=document.querySelector("#toast .title"),i=document.getElementById("toast-body");clearTimeout(xe),o.textContent=t,i.textContent=n,s.className="toast",s.classList.add(e),s.classList.add("show"),xe=setTimeout(function(){s.classList.remove("show")},5e3)}function Wt(){const e=document.getElementById("toast");clearTimeout(xe),e.classList.remove("show")}function $s(){const e=document.querySelector(".toast .close");e.onclick=Wt}function Ws(){const t=document.querySelector("#subscribe-form");let e="";if(!t)return;const n=document.getElementById("subscribe-button"),s=document.getElementById("subscribe-email-input");n.addEventListener("click",()=>{C.capture("website:newsletter_signup_clicked")}),s.addEventListener("focus",()=>{C.capture("website:newsletter_input_selected")}),t.onsubmit=t=>{t.preventDefault(),e||(e=hcaptcha.render("hcaptcha",{sitekey:Ms,callback:t=>{hcaptcha.close(e),Us(t)},size:"invisible"})),hcaptcha.execute(e)}}async function Us(e){const t=document.getElementById("subscribe-email-input"),n=t.value;try{const s=await fetch(`${gs}/mail/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,captcha:e,source:"website"})});if(t.value="",s.status===200){oe("success","Success!","You have been subscribed to our newsletter."),C.capture("website:newsletter_signup_succeeded");return}}catch{t.value=""}oe("error","Error!","Something went wrong. "),C.capture("website:newsletter_signup_failed")}Zn=()=>{let e=document.querySelectorAll(".panel-title");e.forEach(e=>{e.addEventListener("click",function(){Ns(e.parentElement)})})};function Ns(e){e.classList.contains("panel-open")?Vs(e):Hs(e)}function Hs(e){e.classList.add("panel-open");var t=e.querySelector(".panel-content");t.style.maxHeight=t.scrollHeight+"px"}function Vs(e){var t=e.querySelector(".panel-content");t.style.maxHeight=null,e.classList.remove("panel-open")}Rn=()=>{const e=document.querySelectorAll(".card"),n=document.querySelectorAll(".dot");function t(e){n.forEach((t,n)=>{t.classList[n===e?"add":"remove"]("active")})}function s(){let t=Number.MAX_VALUE,n=0;return e.forEach((e,s)=>{let o=Math.abs(e.getBoundingClientRect().left);o<t&&(t=o,n=s)}),n}n.forEach((n,s)=>{n.addEventListener("click",()=>{e[s].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),t(s)})}),document.querySelector(".plans").addEventListener("scroll",()=>{let e=s();t(e)});let o;const a=50,i=document.querySelector(".plans");i.addEventListener("touchstart",e=>{o=e.touches[0].clientX},!1),i.addEventListener("touchend",n=>{const i=o-n.changedTouches[0].clientX;if(Math.abs(i)>a){let n=s();i>0&&n<e.length-1?n++:i<0&&n>0&&n--,e[n].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),t(n)}},!1)},Ln=()=>{const e=document.querySelectorAll(".time span"),t=document.querySelectorAll(".amount");function n(e){t.forEach(t=>{const n=t.nextElementSibling,s=t.parentElement.querySelector(".lifetime-message");t.classList.remove("active"),n&&n.classList.remove("active"),s&&s.classList.remove("active"),setTimeout(()=>{t.textContent=t.dataset[e],n&&e==="year"?(n.textContent=n.dataset[e],n.classList.add("active"),n.style.display="block"):n&&(n.style.display="none"),s&&e==="lifetime"?(s.textContent="Pay once. Enjoy forever!",s.classList.add("active"),s.style.display="block"):s&&(s.style.display="none"),requestAnimationFrame(()=>{t.classList.add("active")})},500)})}e.forEach(t=>{t.addEventListener("click",function(){e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),n(t.id.split("-")[1])})}),document.getElementById("tab-month")?.click()},Dn=()=>{const s=document.querySelectorAll(".time span"),e=document.querySelector(".time .slider");function t(t){e.style.width=`${t.offsetWidth}px`,e.style.left=`${t.offsetLeft}px`}s.forEach(e=>{e.addEventListener("click",()=>{t(e)})});const n=document.getElementById("tab-month");n&&t(n)};function Js(){if(!document.getElementsByClassName("page-pricing").length)return;Zn(),Rn(),Ln(),Dn()}function eo(){let s="";const e=document.querySelector("#contact-form");if(e===null)return;const i=e.querySelector("#contact-form-email-input"),a=document.getElementById("contact-form-name-input"),t=document.getElementById("contact-form-message"),c=document.getElementById("word-count"),o=e.querySelector(".send-btn"),n=document.getElementById("email-error-message");t.addEventListener("input",l);function l(){let e=t.value.length;e>500&&(t.value=t.value.substring(0,500),e=500),c.textContent=`${e}/500`}const r=()=>{d()&&u()?o.classList.remove("disabled-btn"):o.classList.add("disabled-btn")};e.querySelectorAll(".form-control").forEach(e=>{e.addEventListener("input",r)});function d(){const e=i;if(e.value==="")return e.classList.remove("invalid"),n.textContent="",n.style.visibility="hidden",!0;var t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e.value)?(e.classList.remove("invalid"),n.textContent="",n.style.visibility="hidden",!0):(e.classList.add("invalid"),n.textContent="Please enter a valid email address.",n.style.visibility="visible",!1)}function u(){const n=e.querySelectorAll(".form-control[required]");let t=!0;return n.forEach(e=>{e.type==="checkbox"?e.checked||(t=!1):e.type!=="submit"&&e.value===""&&(t=!1)}),t}async function h(e){const n=i.value,s=a.value,r=t.value;try{const c=await fetch(`${gs}/mail/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,captcha:e,name:s,message:r})});return Wt(),i.value="",a.value="",t.value="",o.classList.add("disabled-btn"),c.status===200?oe("success","Success!","Thank you! We received your message."):oe("error","Error!","Something went wrong. ")}catch{return Wt(),oe("error","Error!","Something went wrong. ")}}e.onsubmit=e=>{e.preventDefault(),s||(s=hcaptcha.render("hcaptcha",{sitekey:Ms,callback:e=>{hcaptcha.close(s),h(e)},size:"invisible"})),hcaptcha.execute(s)},r()}we="cookie_consent",on=60*60*24*150,sn=e=>e.split(";").map(e=>e.split("=")).reduce((e,t)=>t.length<2?e:(e[decodeURIComponent(t[0].trim())]=decodeURIComponent(t[1].trim()),e),{}),Kt=(e,t)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}; max-age=${on}; secure; path=/`;function io(){C.init(qs,{autocapture:!1,persistence:"memory",api_host:Ps});const n=sn(document.cookie),t=n[we];if(C.capture("website:visit_page"),document.querySelectorAll("[data-analytics]").forEach(e=>{const t=e,n=e.getAttribute("data-analytics");t.addEventListener("click",()=>C.capture(`website:${n}_clicked`))}),t){t==="ok"?C.opt_in_capturing({}):C.opt_out_capturing({clear_persistence:!0});return}const e=document.getElementById("cookie-consent-id"),s=document.getElementById("cookie-reject-button"),o=document.getElementById("cookie-accept-button");e.style.visibility="visible";const i=()=>{e.remove(),C.opt_in_capturing(),document.cookie=Kt(we,"ok")},a=()=>{e.remove(),C.opt_out_capturing(),document.cookie=Kt(we,"decline")};s.onclick=a,o.onclick=i}(()=>{navigator.platform==="Win32"&&document.body.classList.add("windows"),io(),Ls(),Bs(),Js(),$s(),Ws(),eo()})()})()